var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(f,d,e){f instanceof String&&(f=String(f));for(var w=f.length,A=0;A<w;A++){var T=f[A];if(d.call(e,T,A,f))return{i:A,v:T}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,d,e){if(f==Array.prototype||f==Object.prototype)return f;f[d]=e.value;return f};$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<f.length;++d){var e=f[d];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,d){var e=$jscomp.propertyToPolyfillSymbol[d];if(null==e)return f[d];e=f[e];return void 0!==e?e:f[d]};
$jscomp.polyfill=function(f,d,e,w){d&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,d,e,w):$jscomp.polyfillUnisolated(f,d,e,w))};$jscomp.polyfillUnisolated=function(f,d,e,w){e=$jscomp.global;f=f.split(".");for(w=0;w<f.length-1;w++){var A=f[w];if(!(A in e))return;e=e[A]}f=f[f.length-1];w=e[f];d=d(w);d!=w&&null!=d&&$jscomp.defineProperty(e,f,{configurable:!0,writable:!0,value:d})};
$jscomp.polyfillIsolated=function(f,d,e,w){var A=f.split(".");f=1===A.length;w=A[0];w=!f&&w in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var T=0;T<A.length-1;T++){var S=A[T];if(!(S in w))return;w=w[S]}A=A[A.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?w[A]:null;d=d(e);null!=d&&(f?$jscomp.defineProperty($jscomp.polyfills,A,{configurable:!0,writable:!0,value:d}):d!==e&&(void 0===$jscomp.propertyToPolyfillSymbol[A]&&($jscomp.propertyToPolyfillSymbol[A]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(A):
$jscomp.POLYFILL_PREFIX+A),A=$jscomp.propertyToPolyfillSymbol[A],$jscomp.defineProperty(w,A,{configurable:!0,writable:!0,value:d})))};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(d,e){return $jscomp.findInternal(this,d,e).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(d,e,w){var A=this.length||0;0>e&&(e=Math.max(0,A+e));if(null==w||w>A)w=A;w=Number(w);0>w&&(w=Math.max(0,A+w));for(e=Number(e||0);e<w;e++)this[e]=d;return this}},"es6","es3");$jscomp.typedArrayFill=function(f){return f?f:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");var wma_highzoom_activated=!0,wma_highzoom_purge=!1,wma_bldg3dzoom=14,bldg3d=null,bldg3dc=null,bldg3dtimer=null,update3dBuildings,credit,wmaNews=[],wma_imgbase="tiles/",wma_database="label.php",wma_tilebase=".wma.wmflabs.org/tiles/",wma_maxlabel=13,i,wma_zoomsize=[3];for(i=1;40>i;i++)wma_zoomsize[i]=2*wma_zoomsize[i-1];
var lc={},wma_tilesets=[{name:"mapFull",globe:"Earth",credit:' / Map data \u00a9 <a href="http://www.openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://www.opendatacommons.org/licenses/odbl">License</a>',getTileURL:function(f,d,e,w){me=wma_tilesets[0];return w||"https:"==document.location.protocol?7<=e?wma_imgbase+"mapnik/"+e+"/"+f+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png":wma_imgbase+"mapnik/"+e+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png":7<=e?"//"+(d+f)%8+wma_tilebase+"mapnik/"+
e+"/"+f+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png":"//"+(d+f)%8+wma_tilebase+"mapnik/"+e+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["#2255aa","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:40075,maxzoom:20,minzoom:0},{name:"mapPhysical",globe:"Earth",getTileURL:function(f,d,e){return wma_imgbase+"relief/"+e+"/"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["#2255aa","white 0pt 0pt 2pt"],equator:40075,maxzoom:5,minzoom:0},{name:"mapLandsat",globe:"Earth",
getTileURL:function(f,d,e,w){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return w||"https:"==document.location.protocol?wma_imgbase+"mapnik/sat/"+e+"/"+f+"/"+f+"_"+d%(2*wma_zoomsize[e])+".png":"//"+(d+f)%8+wma_tilebase+"mapnik/sat/"+e+"/"+f+"/"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["white","black 0pt 0pt 2pt"],equator:40075,maxzoom:13,minzoom:0},{name:"mapCoastline",globe:"Earth",getTileURL:function(f,d,e){return wma_imgbase+"plain/"+e+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["#2255aa",
"1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:40075,maxzoom:7,minzoom:0},{name:"mapPhysical",globe:"Moon",getTileURL:function(f,d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"lro_moon/lromoon_00"+(5-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:10940.475,maxzoom:5,minzoom:0},{name:"mapLandsat",globe:"Moon",getTileURL:function(f,
d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"moon/"+e+"/"+f+"_"+d+".jpg"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:10940.475,maxzoom:7,minzoom:0},{name:"mapLandsat",globe:"Mars",getTileURL:function(f,d,e){d=(d+wma_zoomsize[e])%(2*wma_zoomsize[e]);0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"mars/mars_00"+(5-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["white","black 0pt 0pt 2pt"],
equator:21359.975,maxzoom:5,minzoom:0},{name:"mapPhysical",globe:"Venus",getTileURL:function(f,d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"venus/venus_00"+(3-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:38024.6,maxzoom:3,minzoom:0},{name:"mapLandsat",globe:"Mercury",getTileURL:function(f,d,e){d=(d+1*wma_zoomsize[e])%(2*wma_zoomsize[e]);0>d&&(d+=2*
wma_zoomsize[e]);e=6-e;return wma_imgbase+"mercury/"+(3>e?e+"/":"")+(0==e?Math.floor(d/100)+"/":"")+"merc_00"+e+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:15329.1,maxzoom:6,minzoom:0},{name:"mapLandsat",globe:"Io",getTileURL:function(f,d,e){d=(d+wma_zoomsize[e])%(2*wma_zoomsize[e]);0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"io/io_00"+(4-e)+"_"+("000"+d).substr(-3)+"_"+("000"+
f).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:11443.6,maxzoom:4,minzoom:0},{name:"mapLandsat",globe:"Titan",getTileURL:function(f,d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"titan/titan_00"+(3-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:16190.3,maxzoom:3,minzoom:0}];
function parseParams(f){var d={},e,w=f.substr(f.indexOf("?")+1).split("&");for(e=0;e<w.length;++e)f=w[e].split("="),d[f[0]]=f[1];return d}function isRTL(f){return 0<=$.inArray(f,["ar","he","fa"])}
function wikiminiatlasInstall(f,d){function e(){wa.style.visibility="visible"!=wa.style.visibility?"visible":"hidden";return!1}function w(){var a=$("<div></div>").addClass("wmatile").on("mousedown touchstart",Sa).click(function(c){var h=sa(c);if(h.x!=pa.x||h.y!=pa.y||!b.csrender)return!0;(c=wmajt.detectPointer(c,b))&&fb(c)}),b={div:a,img:$("<img>").load(function(c){$(this).fadeIn(100)}).error(function(c){setTimeout(function(){var h=b.img.attr("src");b.img.attr("src",h.replace(/\?.*/,"")+"?"+Math.random())},
1E3)}).appendTo(a),can:$("<canvas></canvas>").appendTo(a),ctx:null,csrender:!1,csx:0,csy:0,csz:20,lx:0,ly:0,lz:20,span:$("<span></span>").appendTo(a),debug:$("<span></span>").addClass("wmadbg").css("display","none").appendTo(a),url:"",xhr:null};Y&&(1<N?(b.can.attr({width:128*N,height:128*N}).css({width:"128px",height:"128px"}),b.ctx=b.can[0].getContext("2d"),b.ctx.scale(N,N)):(b.can.attr({width:128,height:128}),b.ctx=b.can[0].getContext("2d")));$(ha).append(b.div);return b}function A(){var a,b;if(null===
ha){$(document).on("mousemove touchmove",function(c){window.scrollTo(0,0);var h=sa(c);null!==ta&&(F-=h.x-ta.x,I-=h.y-ta.y,ta=h,P(),ba&&(ba=!1,xa()));J.shown&&Ha(ca(F+h.x,I+h.y));h=ca(F+H/2,I+G/2);D&&D.setLatLon(h.lat,h.lon);c.preventDefault()}).on("mouseup touchend",function(){ta=null});$("#wma_map").on("dblclick",gb).on("mousedown touchstart",Sa);ha=document.getElementById("wma_map");ia=Math.floor(H/128)+2;na=Math.floor(G/128)+2;ja=[];for(b=0;b<na;++b)for(a=0;a<ia;++a)ja.push(w());Q.obj=$('<div id="wmamarker"></div>');
$(ha).append(Q.obj)}}function T(){var a=$(window).width(),b=$(window).height(),c=Math.floor(a/128)+2,h=Math.floor(b/128)+2,l;H=a;G=b;Y&&(null!==B.canvas&&(B.canvas.attr({width:a*N,height:b*N}).css({width:a+"px",height:b+"px"}),B.c.setTransform(N,0,0,N,0,0)),bldg3d.attr({width:a*N,height:b*N}).css({width:a+"px",height:b+"px"}),bldg3dc.viewport&&bldg3dc.viewport(0,0,a*N,b*N));if(c!=ia||h!=na){ia=c;for(na=h;ja.length<c*h;)ja.push(w());for(l=0;l<ja.length;++l)l<c*h?ja[l].div.show():ja[l].div.hide();P();
$(ha).width(a).height(b)}else B.shown&&ka()}function S(){B.shown?B.canvas.fadeOut(200):B.canvas.fadeIn(200);B.shown=!B.shown}function Ha(a){function b(y){var q;if(0<y.length){var v=y[0].lat+a.lat;v=ya(v,y[0].lon/Math.cos(v/180*Math.PI)+a.lon);l.moveTo(v.x-g,v.y-k);for(q=1;q<y.length;++q)v=y[q].lat+a.lat,v=ya(v,y[q].lon/Math.cos(v/180*Math.PI)+a.lon),l.lineTo(v.x-g,v.y-k)}}var c,h,l=J.c,x=J.ways,n=J.areas,g=F,k=I;if(null!==l){l.clearRect(0,0,J.canvas[0].width,J.canvas[0].height);if(null!==n)for(l.fillStyle=
"rgb(0, 255, 0)",c=0;c<n.length;c++){l.globalCompositeOperation="source-over";for(h=0;h<n[c].outer.length;++h)l.beginPath(),b(n[c].outer[h]),l.closePath(),l.fill();l.globalCompositeOperation="destination-out";for(h=0;h<n[c].inner.length;++h)l.beginPath(),b(n[c].inner[h]),l.closePath(),l.fill()}if(null!==x){l.globalCompositeOperation="source-over";l.lineWidth=4;l.strokeStyle="rgb(0, 255, 0)";l.beginPath();for(c=0;c<x.length;++c)b(x[c]);l.stroke()}}}function ka(a,b,c,h,l,x){function n(t){var m,p=0;
t[0].lon<B.minlon&&(p=2*a);if(0<t.length){var L=ya(t[0].lat,t[0].lon,a);var K=L.x;x.moveTo(L.x-y+p,L.y-c);for(m=1;m<t.length;++m)L=la(t[m].lat,t[m].lon,a),K=L.x-K,Math.abs(K)>a&&(p-=2*Math.round(K/(2*a))*a),K=L.x,x.lineTo(L.x-y+p,L.y-c)}}var g=B.ways,k=B.areas;a=a||128*wma_zoomsize[C];b=void 0!==b?b:F;c=void 0!==c?c:I;x=x||B.c;var y=b;if(null!==x)for(h=h||B.canvas[0].width,l=l||B.canvas[0].height,x.clearRect(0,0,h,l),l=-2;2>=l;++l){y=b+2*l*a;var q=ya(0,B.minlon,a);var v=ya(0,B.maxlon,a);if(!(0>v.x-
y||q.x-y>h)){if(null!==k)for(x.fillStyle="rgb(255, 0, 0)",x.strokeStyle="rgb(0, 0, 0)",x.lineWidth=2,q=0;q<k.length;++q){x.globalCompositeOperation="source-over";for(v=0;v<k[q].outer.length;++v)x.beginPath(),n(k[q].outer[v]),x.closePath(),x.fill(),x.stroke();x.globalCompositeOperation="destination-out";for(v=0;v<k[q].inner.length;++v)x.beginPath(),n(k[q].inner[v]),x.closePath(),x.fill(),x.stroke()}if(null!==g){x.globalCompositeOperation="source-over";x.lineWidth=4;x.strokeStyle="rgb(0, 0, 255)";x.beginPath();
for(q=0;q<g.length;++q)n(g[q]);x.stroke()}}}}function P(){function a(K,u){function da(ea,V,za,Ia,Ja){ea.click(function(Aa){var W=sa(Aa);if(W.x!=pa.x||W.y!=pa.y)Aa.preventDefault();else if(1==Aa.which&&!Aa.ctrlKey){null==Z.panel&&hb();var qa=H-30,Ta=G-80;W=za;var Da=Ia;W>qa&&(Da=Math.round(Da*qa/W),W=qa);Da>Ta&&(W=Math.round(W*Ta/Da));Z.span.find("img").remove();qa=$("<img/>",{id:"wma_wmaci_image"}).appendTo(Z.span);2*W<za?qa.attr({src:Ba(V,10*Math.floor(W/10),Ja),srcset:Ba(V,20*Math.floor(W/10),Ja)+
" 2x"}):W<za?qa.attr({src:Ba(V,10*Math.floor(W/10),Ja)}):qa.attr("src","//commons.wikimedia.org/wiki/Special:FilePath/"+V);Z.link.attr("href","//commons.wikimedia.org/wiki/File:"+V).text("[[:commons:File:"+decodeURIComponent(V)+"]]");Z.panel.fadeIn(200);Z.shown=!0;Aa.preventDefault()}}).attr("href","https://commons.wikimedia.org/wiki/File:"+V)}var z,fa=[0,0,5,0,0,2,3,4,5,6,6],Ea=[0,0,8,0,0,2,3,4,5,6,6];K.text("");for(z=0;z<u.length;++z){var M=$("<a></a>");if(!(8>=C&&!u[z].lang&&u[z].wg<wma_median_weights.commons[C])){if("img"in
u[z]){da(M,u[z].img,u[z].w,u[z].h,u[z].m5);var R=parseInt(u[z].w)>parseInt(u[z].h)?-2==u[z].style?24:48:Math.floor((-2==u[z].style?24:48)*u[z].w/u[z].h);var ma=Math.floor(R/u[z].w*u[z].h);M.addClass("cthumb").append($("<img/>",{title:decodeURIComponent(u[z].img)}).error(function(){$(this).parent().hide()}).attr({src:Ba(u[z].img,R,u[z].m5),srcset:2*R<=u[z].w?Ba(u[z].img,2*R,u[z].m5)+" 2x":""}).css({width:R+"px",height:ma+"px"}));18>u[z].head?(M.addClass("dir dir"+u[z].head),R=8):R=6;M.css({top:u[z].ty-
R+"px",left:u[z].tx-R+"px"})}else M.addClass("label").addClass("label"+u[z].style).addClass("label-"+u[z].lang).css(Ka).attr({href:"https://"+u[z].lang+".wikipedia.org/wiki/"+u[z].page,target:"_top"}).css({top:u[z].ty-Ea[u[z].style]+"px",left:u[z].tx-fa[u[z].style]+"px",direction:isRTL(u[z].lang)?"rtl":"ltr"}),(R=/(.*?)(\s*\([^\)]*\)$|\s*, [^, \(]*$)/.exec(u[z].name))?M.text(R[1]).append($('<span class="hell">&hellip;</span>')).append($('<span class="sufx"></span>').text(R[2]).hide()).hover(function(){$(".hell",
this).hide();$(".sufx",this).show()},function(){$(".hell",this).show();$(".sufx",this).hide()}):M.text(u[z].name);K.append(M)}}}function b(K,u){var da=K.lx,z=K.ly,fa=1<<K.lz-wma_maxlabel,Ea=[],M,R=[[],[],[],[]];for(M=0;M<u.length;++M){var ma=128*(da/fa-u[M].dx);var ea=128*(z/fa-(wma_zoomsize[wma_maxlabel]-u[M].dy-1));ma=(u[M].tx+u[M].fx-ma)*fa;var V=(u[M].ty+u[M].fy-ea)*fa;0<=ma&&128>ma&&0<=V&&128>V&&(ea=jQuery.extend(!0,{},u[M]),ea.tx=Math.floor(ma),ea.ty=Math.floor(V),ea.fx=ma-ea.tx,ea.fy=V-ea.ty,
R[Math.floor(ma/64)+2*Math.floor(V/64)].push(ea))}for(M=0;4>M;++M)0<R[M].length&&(R[M].sort(function(za,Ia){return Ia.wg-za.wg}),Ea.push(R[M][0]));a(K.span,Ea)}0>I&&(I=0);0>F&&(F+=Math.floor(256*wma_zoomsize[C]));0<F&&(F%=Math.floor(256*wma_zoomsize[C]));var c=Math.floor(F/128)%ia,h=Math.floor(I/128)%na,l=F%128,x=I%128,n,g,k;ib();for(g=0;g<na;g++)for(n=0;n<ia;n++){var y=(n+c)%ia+(g+h)%na*ia;var q=Math.floor(F/128)+n;var v=Math.floor(I/128)+g;var t=wma_tilesets[O].getTileURL(v,q,C);var m=ja[y];m.div.css({left:128*
n-l+"px",top:128*g-x+"px"});if(m.url!=t||wma_highzoom_purge){m.url=t;if(0==O&&12<C){if(m.csrender||(m.csrender=!0,m.img.fadeOut(200)),m.csx!=q||m.csy!=v||m.csz!=C||wma_highzoom_purge)m.can.hide(),m.img.hide(),wmajt.update(q,v,C,m,wma_highzoom_purge)}else{m.csz=C;m.csrender&&m.can.fadeOut(200);if(v>=wma_zoomsize[C]){m.img.fadeOut(0);m.span.text("");continue}m.img.attr("src")!=t?m.img.fadeOut(0).attr("src",t):m.csrender&&m.img.fadeIn(200);m.csrender=!1}null!==m.xhr&&m.xhr.abort();m.lx=q;m.ly=v;m.lz=
C;m.span.html('<span class="loading">'+strings.labelLoading[E]+"</span>");if(C>wma_maxlabel){var p=Math.floor(q/(1<<C-wma_maxlabel));t=Math.floor(v/(1<<C-wma_maxlabel));y=Ua(t,p,wma_maxlabel);t=La(t,p,wma_maxlabel)}else y=Ua(v,q,C),t=La(v,q,C);if(!lc[t]||"filler"in lc[t]){if(lc[t]&&"filler"in lc[t])a(m.span,lc[t].label);else if(C<=wma_maxlabel&&0<C){var L=La(Math.floor(v/2),Math.floor(q/2),C-1);if(lc[L]){p=q%2;lc[t]={label:[],filler:1};for(k=0;k<lc[L].label.length;k++)Math.floor(lc[L].label[k].tx/
64)===q%2&&Math.floor(lc[L].label[k].ty/64)===v%2&&(p=jQuery.extend(!0,{},lc[L].label[k]),p.tx=2*(p.tx+p.fx)-q%2*128,p.ty=2*(p.ty+p.fy)-v%2*128,p.fx=p.tx-Math.floor(p.tx),p.fy=p.ty-Math.floor(p.ty),p.tx=Math.floor(p.tx),p.ty=Math.floor(p.ty),lc[t].label.push(p));a(m.span,lc[t].label)}}(function(K,u,da){m.xhr=$.ajax({url:u,context:m}).success(function(z){try{lc[K]=JSON.parse(z),da?a(this.span,lc[K].label):b(this,lc[K].label)}catch(fa){this.span.html(z)}}).error(function(){this.span.text("")})})(t,
y,C<wma_maxlabel)}else C<wma_maxlabel?a(m.span,lc[t].label):b(m,lc[t].label)}}Ma(Q);for(y=0;y<Na.length;++y)Ma(Na[y]);wma_highzoom_purge=!1;C>=wma_bldg3dzoom&&update3dBuildings();ka()}function X(a){a.clearColor(0,0,0,0);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthMask(!0);a.depthFunc(a.LEQUAL);a.clear(a.COLOR_BUFFER_BIT+a.DEPTH_BUFFER_BIT);var b=a.createProgram(),c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,$("#bldg-vs").text());a.compileShader(c);a.attachShader(b,c);c=a.createShader(a.FRAGMENT_SHADER);
a.shaderSource(c,$("#bldg-fs").text());a.compileShader(c);a.attachShader(b,c);a.linkProgram(b);a.useProgram(b);b.vertexPosAttrib=a.getAttribLocation(b,"pos");a.enableVertexAttribArray(b.vertexPosAttrib);b.normalPosAttrib=a.getAttribLocation(b,"norm");a.enableVertexAttribArray(b.normalPosAttrib);var h=a.getUniformLocation(b,"u_resolution"),l=a.getUniformLocation(b,"u_centerdeg");c=a.getUniformLocation(b,"u_lightdir");r=Math.sqrt(38);a.uniform3f(c,3/r,2/r,5/r);wmajt.registerWebGLBuildingData(5E3,a,
b);return function(){var x=H/2,n=G/2,g=60/(128<<C),k=ca(F+x,I+n);180<k.lon&&(k.lon-=360);a.uniform3f(h,x*g,n*g,850);a.uniform3f(l,k.lon,k.lat,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);wmajt.renderWebGLBuildingData()}}function ra(){function a(m){var p;if(0<q)for(n.moveTo((m[0][0]-k.lon)*v+h,l-(m[0][1]-k.lat)*v),p=1;p<m.length;p++)n.lineTo((m[p][0]-k.lon)*v+h,l-(m[p][1]-k.lat)*v);for(p=0;p<m.length-1;p++)n.moveTo((m[p][0]-k.lon)*v+h,l-(m[p][1]-k.lat)*v),n.lineTo((m[p][0]-k.lon)*t+h,l-(m[p][1]-
k.lat)*t),n.lineTo((m[p+1][0]-k.lon)*t+h,l-(m[p+1][1]-k.lat)*t)}if(Y&&C>wma_bldg3dzoom){var b=wmajt.ref_z(),c=wmajt.zbuild(),h=H/2,l=G/2,x=(128<<C)/60,n=bldg3dc,g,k=ca(F+h,I+l);180<k.lon&&(k.lon-=360);n.lineWidth=.5;n.strokeStyle="rgb(0, 0, 0)";n.beginPath();bldg3dc.clearRect(0,0,H,G);for(g in b){var y=c[g].geo.coordinates;b=3*c[g].tags["building:levels"]||c[g].tags.height;var q=3*c[g].tags["building:min_level"]||c[g].tags.min_height||0;var v=x*(1+q/450);var t=x*(1+b/450);if("Polygon"===c[g].geo.type)for(g=
0;g<y.length;g++)a(y[g]);else a(y)}n.stroke();bldg3d.show();null!==bldg3dtimer&&clearTimeout(bldg3dtimer);setTimeout(update3dBuildings,1500)}else bldg3d.hide()}function Ma(a){var b=la(a.lat,a.lon),c=b.x-F;-100>c&&(c+=256*wma_zoomsize[C]);a.obj.css("left",c-6+"px");a.obj.css("top",b.y-I-6+"px")}function Sa(a){pa=ta=sa(a)}function gb(a){a=sa(a);F+=a.x-H/2;I+=a.y-G/2;ba&&(ba=!1,xa());P();return!1}function fb(a){Oa&&clearTimeout(Oa);Fa.stop(!0).fadeTo(1,1).text(a);Oa=setTimeout(function(){Fa.fadeOut(200)},
5E3)}function aa(a){C=a;bldg3d&&(a>=wma_bldg3dzoom?bldg3d.show():bldg3d.hide())}function Va(a,b){$.ajax({url:"//tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang="+a+"&article="+b,dataType:"json",success:jb})}function kb(a){var b=!1;a=a||window.event;switch(a.keyCode||a.which){case 37:F-=H/1;break;case 38:I-=G/1;break;case 39:F+=H/1;break;case 40:I+=G/1;break;case 187:case 107:Wa();break;case 189:case 109:Xa();break;case 80:wma_highzoom_purge=!0;P();break;case 79:J.shown?(J.shown=!1,J.canvas.fadeOut(200)):
Va(strings.sover[E].site,strings.sover[E].list[0]);break;case 84:ua((O+1)%wma_tilesets.length);break;case 76:a="en de fr ru ar he ko ja ml fa commons".split(" ");a=a[($.inArray(U,a)+1)%a.length];Fa.text(wikiminiatlas_sites[a]);Ga(a,!0);break;case 67:Ga("commons",!0);break;case 27:J.shown&&(J.shown=!1,J.canvas.fadeOut(200));Z.shown&&Ya();"hidden"!=wa.style.visibility&&(wa.style.visibility="hidden");break;default:b=!0}ba&&(ba=!1,xa());P();return b}function sa(a){var b=a.originalEvent;return"touches"in
b?{x:b.touches[0].pageX,y:b.touches[0].pageY}:{x:a.pageX,y:a.pageY}}function La(a,b,c){return U+"_"+(wma_zoomsize[c]-a-1)+"_"+b%(2*wma_zoomsize[c])+"_"+c+"_"+wma_tilesets[O].globe}function Ua(a,b,c){return wma_database+"?l="+U+"&a="+(wma_zoomsize[c]-a-1)+"&b="+b%(2*wma_zoomsize[c])+"&z="+c+"&g="+wma_tilesets[O].globe}function Wa(a){var b=ca(F+H/2,I+G/2),c=!1;a||(a=window.event);a&&(a.which?c=3==a.which:a.button&&(c=2==a.button));c?Y&&wma_highzoom_activated?aa(0==O?15:wma_tilesets[O].maxzoom):aa(0==
O?12:wma_tilesets[O].maxzoom):C>=(0!=O||Y&&wma_highzoom_activated?wma_tilesets[O].maxzoom:12)||aa(C+1);a=ba?la(Q.lat,Q.lon):la(b.lat,b.lon);F=a.x-H/2;I=a.y-G/2;P();return!1}function Xa(a){var b=ca(F+H/2,I+G/2),c=!1;a||(a=window.event);a&&(a.which?c=3==a.which:a.button&&(c=2==a.button));if(c)aa(wma_tilesets[O].minzoom);else if(C<=wma_tilesets[O].minzoom)a:for(a=O-1;0<=a;a--){if(wma_tilesets[a].minzoom<C-1){O=a;C--;break a}}else aa(C-1);b=la(b.lat,b.lon);F=b.x-H/2;I=b.y-G/2;P();return!1}function ua(a,
b){var c=C;O=a;Ka={color:wma_tilesets[a].linkcolor[0],textShadow:wma_tilesets[a].linkcolor[1]};$("a.label").css(Ka);credit.text("");"credit"in wma_tilesets[a]&&credit.html(wma_tilesets[a].credit);c>(0!=a?wma_tilesets[a].maxzoom:Y&&wma_highzoom_activated?15:12)&&(c=wma_tilesets[a].maxzoom);c<wma_tilesets[a].minzoom&&(c=wma_tilesets[a].minzoom);C!=c&&(a=ca(F+H/2,I+G/2),aa(c),c=la(a.lat,a.lon),F=c.x-H/2,I=c.y-G/2);b||P();Za()}function Ga(a){U=a;for(a=0;a<ia*na;++a)ja[a].url="";P()}function ib(){var a=
ca(F+H/2,I+G/2);var b=Math.cos(.0174532778*a.lat)*wma_tilesets[O].equator*50/(256*wma_zoomsize[C]);a=Math.pow(10,Math.floor(Math.log(b)/Math.log(10)));b=50*a/b;50>5*b&&(b*=5,a*=5);50>2*b&&(b*=2,a*=2);$a.text(1>a?1E3*a+" m":a+" km");ab.width(b)}function xa(){ba?$("#button_target").css("background-position",""):$("#button_target").css("background-position","-40px 0")}function Pa(a,b){a=la(a,b);F=a.x-H/2;I=a.y-G/2;P()}function lb(){Pa(Q.lat,Q.lon);ba=!0;xa()}function ya(a,b,c){c=c||128*wma_zoomsize[C];
return{y:Math.floor((.5-a/180)*c),x:Math.floor(b/360*c*2)}}function la(a,b,c){c=c||128*wma_zoomsize[C];b=Math.floor(b/360*c*2);0>b&&(b+=2*c);return{y:Math.floor((.5-a/180)*c),x:b}}function ca(a,b){return{lat:180*(.5-b/(128*wma_zoomsize[C])),lon:a/(256*wma_zoomsize[C])*360}}function Ba(a,b,c){function h(x){for(var n=0;n<l.length;n++)if(x<l[n])return l[n];return x}var l=[120,150,180,200,220,250,300,400];return c?"https://upload.wikimedia.org/wikipedia/commons/thumb/"+c[0]+"/"+c+"/"+a+"/"+h(b)+"px-"+
a:"https://commons.wikimedia.org/w/thumb.php?w="+h(b)+"&f="+a}function Ya(){Z.shown=!1;Z.panel.fadeOut(200)}function hb(){Z.panel=$("<div></div>",{id:"wma_wmaci_panel"}).append($("<div></div>",{id:"wma_wmaci_panel_sub"}).append(Z.span=$("<span></span>")).append($("<br/>")).append(Z.link=$("<a></a>",{id:"wma_wmaci_link",target:"_top"}).click(function(a){a.stopPropagation()}))).css("visibility","visible").hide().click(Ya).appendTo(f)}function mb(){var a=window.open("","showwin","left=0, top=0, width="+
screen.width+", height="+screen.height+", toolbar=0, resizable=0, fullscreen=1"),b=d.page,c=d.lang,h=wma_tilesets[O].globe,l=ca(F+H/2,I+G/2);a.document.location=document.location.pathname+"?"+Q.lat+"_"+Q.lon+"_0_0_"+U+"_"+C+"_"+Ca+"_"+l.lat+"_"+l.lon+"&globe="+h+"&page="+b+"&lang="+c}function Qa(a,b){return function(c){window.parent.postMessage(b+", "+a,"*")}}function Ra(a){Y&&(a=a||B,null===a.canvas&&(a.canvas=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({width:H+"px",height:G+
"px"}).appendTo($(ha)),a.c=a.canvas[0].getContext("2d"),a.c.scale(N,N),a.shown=!0,a.drawn=!0,a==B&&$("#button_kml").show()),a===B&&D&&D.updateKML())}function nb(a){a=a.originalEvent;var b=JSON.parse(a.data),c;if("coords"in b)for(c=0;c<b.coords.length;++c){var h={obj:null,lat:b.coords[c].lat,lon:b.coords[c].lon};if(1E-4<Math.abs(h.lat-Q.lat)||1E-4<Math.abs(h.lon-Q.lon))h.obj=$("<div></div>").attr("title",decodeURIComponent(b.coords[c].title)).addClass("emarker").mouseover(Qa(c,"highlight")).mouseout(Qa(c,
"unhighlight")).click(Qa(c,"scroll")).appendTo($(ha)),Ma(h),Na.push(h)}if("ways"in b||"areas"in b)Ra(),B.ways=b.ways||null,B.areas=b.areas||null,ka();if("minlon"in b&&"maxlon"in b){if(!("maxlon"in B)||b.maxlon>B.maxlon)B.maxlon=b.maxlon;if(!("minlon"in B)||b.minlon<B.minlon)B.minlon=b.minlon}"getcoords"in b&&(c={query:b.getcoords,response:{topleft:ca(F,I),rightbottom:ca(F+H,I+G)}},window.parent&&window.parent.postMessage(JSON.stringify(c),a.origin));"moveto"in b&&(a=b.moveto,"zoom"in a&&aa(a.zoom),
"lat"in a&&"lon"in a&&(Pa(a.lat,a.lon),D&&D.setLatLon(a.lat,a.lon)))}function bb(a,b){function c(g){var k,y=180/Math.PI,q=Math.PI/2,v=180/2.003750834E7,t=[],m=-Infinity,p=Infinity;for(k=0;k<g.length;++k){var L=g[k][0]*v;var K=y*(2*Math.atan(Math.exp(g[k][1]*v/y))-q);L>m&&(m=L);L<p&&(p=L);K>b.maxlat&&(b.maxlat=K);K<b.minlat&&(b.minlat=K);t.push({lat:K,lon:L})}"maxlon"in b&&"maxlon"in b?(g=[{r:Math.max(b.maxlon,m),l:Math.min(b.minlon,p)},{r:Math.max(b.maxlon,m+360),l:Math.min(b.minlon,p+360)},{r:Math.max(b.maxlon+
360,m),l:Math.min(b.minlon+360,p)}],g.sort(function(u,da){return u.r-u.l-(da.r-da.l)}),b.minlon=g[0].l,b.maxlon=g[0].r):(b.maxlon=m,b.minlon=p);return t}function h(g){var k={outer:[],inner:[]},y;k.outer.push(c(g[0]));for(y=1;y<g.length;y++)k.inner.push(c(g[y]));b.areas?b.areas.push(k):b.areas=[k]}function l(g){g=[c(g)];b.ways?b.ways.push.apply(b.ways,g):b.ways=g}function x(g){var k;switch(g.type){case "LineString":l(g.coordinates);break;case "MultiLineString":for(k=0;k<g.coordinates.length;k++)l(g.coordinates[k]);
break;case "Polygon":h(g.coordinates);break;case "MultiPolygon":for(k=0;k<g.coordinates.length;k++)h(g.coordinates[k])}}var n;if("type"in a)if("GeometryCollection"==a.type)for(n=0;n<a.geometries.length;++n)x(a.geometries[n]);else x(a)}function ob(a){bb(a,B);if(B.ways||B.areas)Ra(),ka();if(B.maxlon&&B.minlon&&-Infinity<B.maxlat&&Infinity>B.minlat){a=(B.maxlon+B.minlon)/2;var b=(B.maxlat+B.minlat)/2,c=(B.maxlon-B.minlon)/180*384,h=(B.maxlat-B.minlat)/180*384,l;for(l=0;12>l&&!(c>H/2||h>G/2);++l)c*=2,
h*=2;aa(l);Pa(b,a)}}function jb(a){function b(n){var g,k=0;n[0].lon<J.minlon&&(k=360);for(g=0;g<n.length;++g)n[g].lon-=l-k,n[g].lon*=Math.cos(n[g].lat/180*Math.PI),n[g].lat-=x}var c=J.c,h=J.canvas;h?J={shown:!0,drawn:!1,canvas:h,c:c,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity}:(J={shown:!0,drawn:!1,canvas:null,c:null,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity},Ra(J));bb(a,J);a=J.areas;c=J.ways;var l=(J.maxlon+J.minlon)/2,x=(J.maxlat+J.minlat)/2;if(null!==a)for(i=0;i<a.length;++i){for(j=
0;j<a[i].outer.length;++j)b(a[i].outer[j]);for(j=0;j<a[i].inner.length;++j)b(a[i].inner[j])}if(null!==c)for(i=0;i<c.length;++i)latNorm(c[i]);J.canvas.fadeIn(200)}var H=500,G=300,ha=null,cb=!1,ia,na,ja,ta=null,pa={x:-1,y:-1},F=0,I=0,C=1,db=0,Q={obj:null,lat:0,lon:0},Na=[],ba=!0,wa=null,Ca="de",U="",E="en",oa=!1,O=0,$a=null,ab=null,va=null,eb=null,Z={shown:!1,panel:null,image:null,link:null};d=d||parseParams(window.location.href);var J={},B={shown:!1,drawn:!1,canvas:null,c:null,ways:null,areas:null,
maxlat:-Infinity,minlat:Infinity},Ka={},D=!1,Za=null,Y="HTMLCanvasElement"in window,N="devicePixelRatio"in window?window.devicePixelRatio:1,Fa,Oa=null;(function(){var a=d.wma||window.location.search.substr(1);var b=d.page,c=d.lang;va=d.globe||"Earth";b&&Y&&$.ajax({url:"//tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang="+c+"&article="+b,dataType:"json",success:ob});Za=function(){if(!Y)return function(){};var g=$("<canvas></canvas>").attr({width:1024,height:512}).css({display:"none"}),k=$("<canvas></canvas>").attr({width:768,
height:384}).css({display:"none"}),y=$("<canvas></canvas>").attr({width:768,height:384}).css({display:"none"}),q=$("<div></div>").css({position:"absolute",width:"80px",height:"80px",bottom:"20px",right:"5px",zIndex:50,display:"none",borderRadius:"40px","-moz-border-radius":"40px",boxShadow:"5px 5px 25px rgba(0, 0, 0, 0.3)"}),v=$("<canvas></canvas>").attr({width:160,height:160}).css({position:"absolute",width:"80px",height:"80px",bottom:"20px",right:"5px",zIndex:51,display:"none"});$("body").append(v).append(g).append(q);
return function(){function t(da,z){var fa=new Image;$(fa).load(function(){K.drawImage(fa,128*da,128*z);L++;if(18==L){u.drawImage(k[0],0,0,1024,512);if(!D){D=wmaGlobe3d(v[0],g[0]);if(!D)return;D.setLatLon(Q.lat,Q.lon);q.fadeIn(200);v.fadeIn(200);D.mapContext=u;D.tmap=k[0];D.tmapContext=K;D.omap=y[0];D.omapContext=y[0].getContext("2d");D.updateTiles=function(){D.mapContext.clearRect(0,0,1024,512);D.mapContext.drawImage(D.tmap,0,0,1024,512);D.updateTexture();D.draw()};D.updateKML=function(){D.mapContext.clearRect(0,
0,1024,512);D.mapContext.drawImage(D.tmap,0,0,1024,512);D.mapContext.save();D.mapContext.globalAlpha=.5;ka(384,0,0,768,384,D.omapContext);D.mapContext.drawImage(D.omap,0,0,1024,512);D.mapContext.restore();D.updateTexture();D.draw()}}B.canvas?D.updateKML():D.updateTiles()}}).attr("src",wma_tilesets[O].getTileURL(z,da,0,!0))}var m,p,L=0,K=k[0].getContext("2d"),u=g[0].getContext("2d");K.clearRect(0,0,768,384);for(m=0;6>m;++m)for(p=0;3>p;++p)t(m,p)}}();c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)/;c.test(a)&&
(c.exec(a),Q.lat=parseFloat(RegExp.$1),Q.lon=parseFloat(RegExp.$2),H=$(window).width(),G=$(window).height(),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)/,c.test(a)&&(c.exec(a),U=RegExp.$5),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)/,c.test(a)&&(c.exec(a),db=parseInt(RegExp.$6,10),aa(db),aa(Math.min(C,0!=O?wma_tilesets[O].maxzoom:Y&&wma_highzoom_activated?15:12)),aa(Math.max(C,wma_tilesets[O].minzoom))),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)_([a-z-]+)/,c.test(a)?
(c.exec(a),Ca=RegExp.$7):Ca=U,c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)_([a-z-]+)_([\d+-.]+)_([\d+-.]+)/,c.test(a)?(a=la(RegExp.$8,RegExp.$9),ba=!1,cb=!0):(a=la(Q.lat,Q.lon),ba=!0),F=a.x-H/2,I=a.y-G/2);U=U.split("-")[0];E=Ca;if("co"==E||"commons"==E)E="en";oa=isRTL(E);wmajt.setUILang(E);for(n in strings)strings[n][E]||(strings[n][E]=strings[n].en);var h='<div class="bsprite" id="button_plus" title="'+strings.zoomIn[E]+'"></div><div class="bsprite" id="button_minus" title="'+strings.zoomOut[E]+
'"></div><div class="bsprite" id="button_target" title="'+strings.center[E]+'"></div><div class="bsprite" id="button_kml" title="'+strings.kml[E]+'"></div><div class="bsprite" id="button_menu" title="'+strings.settings[E]+'"></div>';h=cb?h+('<img id="button_hide" src="'+wma_imgbase+'button_hide.png" title="'+strings.close[E]+'" onclick="window.close()">'):h+('<img id="button_fs" src="'+wma_imgbase+'button_fs.png" title="'+strings.fullscreen[E]+'">');h+='<div id="wma_map" style="position:absolute; width:'+
H+"px; height:"+G+'px; cursor: move; background-color: #aaaaaa;"></div>';h+='<div id="scalebox"><div id="scalebar"></div><div id="scalelabel">null</div></div>';h+='<div id="synopsis"><p id="synopsistext"></p></div>';h+='<div id="wma_settings"><h4>'+strings.settings[E]+'</h4><p class="option">Size Comparison <select id="wmaSetSizeOverlay">';a=strings.sover[E].list;h+='<option value="-" class="bg" selected="selected">-</option>';h+='<option value="+" class="bg">'+strings.other[E]+"</option>";h+='<option value="*" class="bg">'+
decodeURIComponent(b)+"</option>";for(n in a)h+='<option value="'+a[n]+'">'+a[n]+"</option>";h+='</select></p><a href="//wma.wmflabs.org/" target="_top"><img src="//upload.wikimedia.org/wikipedia/commons/4/46/Powered_by_labs_button.png" border="0"></a></div>';f.html(h).append($("<span></span>",{id:"wmacredit"}).append($("<a></a>",{href:"//meta.wikimedia.org/wiki/WikiMiniAtlas/"+Ca,target:"_top"}).text("WikiMiniAtlas")).append(credit=$("<span></span>")));var l=new wmaMenu(oa);(function(){var g;l.addTitle(strings.labelSet[E],
oa);var k='<select id="wmaLabelSet">';U in wikiminiatlas_sites&&(k+='<option value="'+U+'" selected="selected">'+wikiminiatlas_sites[U]+"</option>");U!==E&&E in wikiminiatlas_sites&&(k+='<option value="'+E+'">'+wikiminiatlas_sites[E]+"</option>");if(U in wikiminiatlas_sites||E in wikiminiatlas_sites)k+="<option disabled></option>";for(g in wikiminiatlas_sites)"commons"!==g&&(k+='<option value="'+g+'">'+wikiminiatlas_sites[g]+"</option>");var y=l.addGroup([["LANG",k+"</select>"],["commons",strings.commons[E]]],
function(t){"LANG"==t&&(t=y.items.LANG.find("select option:selected").val());Ga(t)},"commons"==U?"commons":"LANG",oa);y.items.LANG.find("select").click(function(t){t.stopPropagation()}).change(function(t){y.items.LANG.click()});l.addSep();var q={};for(g=0;g<wma_tilesets.length;++g)k=wma_tilesets[g].globe,q[k]=q[k]||[],q[k].push([g,strings[wma_tilesets[g].name][E]||""]);h='<select id="wmaGlobeSet">';for(g in q)h+='<option value="'+g+'"',g==va&&(h+='selected="selected"'),h+=">"+strings["map"+g][E]+
"</option>";h+="</select>";l.addTitle(strings.solarSystem[E],oa);var v=l.addItem(h,void 0,oa);v.find("select").click(function(t){t.stopPropagation()}).change(function(t){t=$(this).find("option:selected").val();q[va].hide();q[t].show();va=t;v.click();ua(q[t].current())});l.addSep();l.addTitle(strings.mode[E],oa);for(g in q)q[g]=l.addGroup(q[g],ua,q[g][0][0],oa),g!==va&&q[g].hide(),l.addSep();l.addItem(strings.sizeRef[E],e)})();$("#button_menu").click(function(){l.toggle()});$("#button_fs").click(mb);
$("#wma_widget").append(l.div.css({right:"40px",top:"26px"}));a=strings.dyk[E];var x=$("<div></div>").html(a[Math.floor(Math.random()*a.length)]).addClass("news");Fa=$("<div></div>").css({position:"absolute",top:"30px",left:"60px",zIndex:100,fontSize:"40px",color:"white",textShadow:"1px 1px 5px black",fontWeight:"bold"}).appendTo("#wma_widget");wmaNews[0]=function(){ua(4)};wmaNews[1]=function(){Y?(F=19039255,I=3363704,aa(15),ua(0)):x.text("Sorry, your browser does not support the canvas element! Try FireFox or Google Chrome.")};
$("#wma_widget").append(x);x.click(function(){x.fadeOut()});setTimeout(function(){x.fadeOut()},1E4);$a=$("#scalelabel");ab=$("#scalebar");document.getElementById("button_target");wa=document.getElementById("wma_settings");$("#wmaLabelSet").change(function(){Ga(this.value)});$("#wmaSetSizeOverlay").change(function(){a:{var g=strings.sover[E].site,k=this.value;if("+"==k&&(k=prompt("Enter article title to use as overlay"),!k))break a;"*"==k&&(k=d.page,g=d.lang);"-"==k?(J.shown=!1,J.canvas.fadeOut(200)):
(Va(g,k),e())}});$("#button_plus").on("mousedown",Wa);$("#button_minus").on("mousedown",Xa);$("#button_target").on("click",lb);$("#button_kml").on("click",S);$(document).on("keydown",kb);$(document).on("contextmenu",function(){return!1});$("body").on("dragstart",function(){return!1});$("#wma_map").click(function(g){g=sa(g);if(g.x!=pa.x||g.y!=pa.y)return!1});A();bldg3d=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({zIndex:19,opacity:.75,width:H+"px",height:G+"px"}).appendTo($(ha));
if(Y){try{bldg3dc=bldg3d[0].getContext("experimental-webgl"),update3dBuildings=X(bldg3dc)}catch(g){bldg3dc=null,bldg3d.remove(),bldg3d=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({zIndex:19,opacity:.75,width:H+"px",height:G+"px"}).appendTo($(ha))}bldg3dc&&!1!==update3dBuildings||(bldg3dc=bldg3d[0].getContext("2d"),bldg3dc.scale(N,N),update3dBuildings=ra)}$(window).resize(T);var n;for(n=0;n<wma_tilesets.length&&wma_tilesets[n].globe!=va;++n);ua(n,!0);P();xa();eb=/https?:\/\/([a-z-]+)\.wikipedia\.org\/wiki\/(.*)/;
$("#wma_widget").mouseover(function(g){if(g.metaKey||g.ctrlKey)if(g.target.href&&eb.test(g.target.href)){g=RegExp.$1;var k=RegExp.$2;$.getJSON("https://"+g+".wikipedia.org/api/rest_v1/page/summary/"+k,function(y){$("#synopsistext").css({direction:y.dir,"padding-left":"0.5em","padding-right":"0.5em"}).html(y.extract_html);if("thumbnail"in y){var q=new Image,v=y.thumbnail.width/2,t=y.thumbnail.height/2,m="ltr"==y.dir?"left":"right";$(q).css({width:v+"px",height:t+"px",position:"absolute",bottom:"0.5em"}).css(m,
"10px").load(function(){$("#synopsistext").css("padding-"+m,v+20+"px").append($(q))}).attr("src",y.thumbnail.source)}$("#synopsis").fadeIn("slow");setTimeout(function(){var p=$("#synopsistext").outerHeight(!0),L=G/2;$("#synopsis").animate({height:p<L?p:L})},500)})}else $("#synopsis").fadeOut("fast")});$("#synopsis").click(function(g){g.target==this&&$("#synopsis").fadeOut("fast")});if(window.postMessage&&($(window).on("message",nb),window!=window.top))try{window.parent.postMessage("request","*")}catch(g){}})()}
function wmaMenu(f){this.div=$("<div></div>").addClass("wmamenu").css("direction",!0===f?"rtl":"");this.parent=null;this.shown=!1}wmaMenu.prototype.addTitle=function(f,d){return $("<div></div>").addClass("wmamenutitle").html(f).css("direction",!0===d?"rtl":"").appendTo(this.div)};
wmaMenu.prototype.addItem=function(f,d,e){d=d||function(){};var w=this,A=$("<div></div>").addClass("wmamenuitem").html(f).css("direction",!0===e?"rtl":"").mouseenter(function(){A.css("background-color","#AAA")}).mouseleave(function(){A.css("background-color","")}).click(function(){d();w.close()}).appendTo(this.div);return A};
wmaMenu.prototype.addMenu=function(f,d,e){var w=$("<div></div>").addClass("wmasubmenu").html(f).css("direction",!0===e?"rtl":"").mouseenter(function(){w.css("background-color","#AAA")}).mouseleave(function(){w.css("background-color","");d.hide()}).click(function(){d.move(w.width(),0);d.show()}).append(d.div).appendTo(this.div);d.parent=this;return w};
wmaMenu.prototype.addCheck=function(f,d,e,w){function A(){e?T.addClass("wmamenuchecked"):T.removeClass("wmamenuchecked")}var T=this.addItem(f,function(){e=!e;A();d(e)},w);d=d||function(){};A();return{toggle:function(S){void 0===S&&(e=!e,A())},check:A,item:T}};
wmaMenu.prototype.addGroup=function(f,d,e,w){function A(X){if(X!=ka){for(var ra in S)ra==X?S[ra].addClass("wmamenuselected"):S[ra].removeClass("wmamenuselected");ka=X}}function T(X,ra){S[X]=Ha.addItem(ra,function(){A(X);d(X)},w)}var S={},Ha=this,ka=-1;e=e||0;d=d||function(){};for(var P=0;P<f.length;++P)"object"===typeof f[P]?T(f[P][0],f[P][1]):T(P,f[P]);A(e);return{items:S,select:A,current:function(){return ka},hide:function(){for(var X in S)S[X].hide()},show:function(){for(var X in S)S[X].show()}}};
wmaMenu.prototype.addSep=function(){this.div.children().last().css({"border-bottom-style":"solid","border-bottom-width":"1px","border-bottom-color":"#AAA"})};wmaMenu.prototype.show=function(){this.div.fadeIn(200);this.shown=!0};wmaMenu.prototype.hide=function(){this.div.fadeOut(200);this.shown=!1};wmaMenu.prototype.toggle=function(){this.shown?this.hide():this.show()};wmaMenu.prototype.close=function(){this.hide();this.parent&&this.parent.close()};
wmaMenu.prototype.move=function(f,d){this.div.css({top:d+"px",left:f+"px"})};
