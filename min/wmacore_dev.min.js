var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(g,e,f){g instanceof String&&(g=String(g));for(var v=g.length,x=0;x<v;x++){var T=g[x];if(e.call(f,T,x,g))return{i:x,v:T}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,e,f){if(g==Array.prototype||g==Object.prototype)return g;g[e]=f.value;return g};$jscomp.getGlobal=function(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var e=0;e<g.length;++e){var f=g[e];if(f&&f.Math==Math)return f}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(g,e){var f=$jscomp.propertyToPolyfillSymbol[e];if(null==f)return g[e];f=g[f];return void 0!==f?f:g[e]};
$jscomp.polyfill=function(g,e,f,v){e&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(g,e,f,v):$jscomp.polyfillUnisolated(g,e,f,v))};$jscomp.polyfillUnisolated=function(g,e,f,v){f=$jscomp.global;g=g.split(".");for(v=0;v<g.length-1;v++){var x=g[v];if(!(x in f))return;f=f[x]}g=g[g.length-1];v=f[g];e=e(v);e!=v&&null!=e&&$jscomp.defineProperty(f,g,{configurable:!0,writable:!0,value:e})};
$jscomp.polyfillIsolated=function(g,e,f,v){var x=g.split(".");g=1===x.length;v=x[0];v=!g&&v in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var T=0;T<x.length-1;T++){var S=x[T];if(!(S in v))return;v=v[S]}x=x[x.length-1];f=$jscomp.IS_SYMBOL_NATIVE&&"es6"===f?v[x]:null;e=e(f);null!=e&&(g?$jscomp.defineProperty($jscomp.polyfills,x,{configurable:!0,writable:!0,value:e}):e!==f&&(void 0===$jscomp.propertyToPolyfillSymbol[x]&&($jscomp.propertyToPolyfillSymbol[x]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(x):
$jscomp.POLYFILL_PREFIX+x),x=$jscomp.propertyToPolyfillSymbol[x],$jscomp.defineProperty(v,x,{configurable:!0,writable:!0,value:e})))};$jscomp.polyfill("Array.prototype.find",function(g){return g?g:function(e,f){return $jscomp.findInternal(this,e,f).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(g){return g?g:function(e,f,v){var x=this.length||0;0>f&&(f=Math.max(0,x+f));if(null==v||v>x)v=x;v=Number(v);0>v&&(v=Math.max(0,x+v));for(f=Number(f||0);f<v;f++)this[f]=e;return this}},"es6","es3");$jscomp.typedArrayFill=function(g){return g?g:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");var wma_highzoom_activated=!0,wma_highzoom_purge=!1,wma_bldg3dzoom=14,bldg3d=null,bldg3dc=null,bldg3dtimer=null,update3dBuildings,credit,wmaNews=[],wma_imgbase="tiles/",wma_database="label.php",wma_tilebase=".wma.wmflabs.org/tiles/",wma_maxlabel=13,i,wma_zoomsize=[3];for(i=1;40>i;i++)wma_zoomsize[i]=2*wma_zoomsize[i-1];
var lc={},wma_tilesets=[{name:"mapFull",globe:"Earth",credit:' / Map data \u00a9 <a href="http://www.openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://www.opendatacommons.org/licenses/odbl">License</a>',getTileURL:function(g,e,f,v){me=wma_tilesets[0];var x=7<f?"mapnik/":"mapnik.new/";return v||"https:"==document.location.protocol?7<=f?wma_imgbase+x+f+"/"+g+"/tile_"+g+"_"+e%(2*wma_zoomsize[f])+".png":wma_imgbase+x+f+"/tile_"+g+"_"+e%(2*wma_zoomsize[f])+".png":7<=f?"//"+(e+g)%8+wma_tilebase+
x+f+"/"+g+"/tile_"+g+"_"+e%(2*wma_zoomsize[f])+".png":"//"+(e+g)%8+wma_tilebase+x+f+"/tile_"+g+"_"+e%(2*wma_zoomsize[f])+".png"},linkcolor:["#2255aa","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:40075,maxzoom:20,minzoom:0},{name:"mapPhysical",globe:"Earth",getTileURL:function(g,e,f){return wma_imgbase+"relief/"+f+"/"+g+"_"+e%(2*wma_zoomsize[f])+".png"},linkcolor:["#2255aa","white 0pt 0pt 2pt"],equator:40075,maxzoom:5,minzoom:0},{name:"mapLandsat",globe:"Earth",
getTileURL:function(g,e,f,v){e%=2*wma_zoomsize[f];0>e&&(e+=2*wma_zoomsize[f]);return v||"https:"==document.location.protocol?wma_imgbase+"mapnik/sat/"+f+"/"+g+"/"+g+"_"+e%(2*wma_zoomsize[f])+".png":"//"+(e+g)%8+wma_tilebase+"mapnik/sat/"+f+"/"+g+"/"+g+"_"+e%(2*wma_zoomsize[f])+".png"},linkcolor:["white","black 0pt 0pt 2pt"],equator:40075,maxzoom:13,minzoom:0},{name:"mapCoastline",globe:"Earth",getTileURL:function(g,e,f){return wma_imgbase+"plain/"+f+"/tile_"+g+"_"+e%(2*wma_zoomsize[f])+".png"},linkcolor:["#2255aa",
"1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:40075,maxzoom:7,minzoom:0},{name:"mapPhysical",globe:"Moon",getTileURL:function(g,e,f){e%=2*wma_zoomsize[f];0>e&&(e+=2*wma_zoomsize[f]);return wma_imgbase+"lro_moon/lromoon_00"+(5-f)+"_"+("000"+e).substr(-3)+"_"+("000"+g).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:10940.475,maxzoom:5,minzoom:0},{name:"mapLandsat",globe:"Moon",getTileURL:function(g,
e,f){e%=2*wma_zoomsize[f];0>e&&(e+=2*wma_zoomsize[f]);return wma_imgbase+"moon/"+f+"/"+g+"_"+e+".jpg"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:10940.475,maxzoom:7,minzoom:0},{name:"mapLandsat",globe:"Mars",getTileURL:function(g,e,f){e=(e+wma_zoomsize[f])%(2*wma_zoomsize[f]);0>e&&(e+=2*wma_zoomsize[f]);return wma_imgbase+"mars/mars_00"+(5-f)+"_"+("000"+e).substr(-3)+"_"+("000"+g).substr(-3)+".png"},linkcolor:["white","black 0pt 0pt 2pt"],
equator:21359.975,maxzoom:5,minzoom:0},{name:"mapPhysical",globe:"Venus",getTileURL:function(g,e,f){e%=2*wma_zoomsize[f];0>e&&(e+=2*wma_zoomsize[f]);return wma_imgbase+"venus/venus_00"+(3-f)+"_"+("000"+e).substr(-3)+"_"+("000"+g).substr(-3)+".png"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:38024.6,maxzoom:3,minzoom:0},{name:"mapLandsat",globe:"Mercury",getTileURL:function(g,e,f){e=(e+1*wma_zoomsize[f])%(2*wma_zoomsize[f]);0>e&&(e+=2*
wma_zoomsize[f]);f=6-f;return wma_imgbase+"mercury/"+(3>f?f+"/":"")+(0==f?Math.floor(e/100)+"/":"")+"merc_00"+f+"_"+("000"+e).substr(-3)+"_"+("000"+g).substr(-3)+".png"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:15329.1,maxzoom:6,minzoom:0},{name:"mapLandsat",globe:"Io",getTileURL:function(g,e,f){e=(e+wma_zoomsize[f])%(2*wma_zoomsize[f]);0>e&&(e+=2*wma_zoomsize[f]);return wma_imgbase+"io/io_00"+(4-f)+"_"+("000"+e).substr(-3)+"_"+("000"+
g).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:11443.6,maxzoom:4,minzoom:0},{name:"mapLandsat",globe:"Titan",getTileURL:function(g,e,f){e%=2*wma_zoomsize[f];0>e&&(e+=2*wma_zoomsize[f]);return wma_imgbase+"titan/titan_00"+(3-f)+"_"+("000"+e).substr(-3)+"_"+("000"+g).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:16190.3,maxzoom:3,minzoom:0}];
function parseParams(g){var e={},f,v=g.substr(g.indexOf("?")+1).split("&");for(f=0;f<v.length;++f)g=v[f].split("="),e[g[0]]=g[1];return e}function isRTL(g){return 0<=$.inArray(g,["ar","he","fa"])}
function wikiminiatlasInstall(g,e){function f(){xa.style.visibility="visible"!=xa.style.visibility?"visible":"hidden";return!1}function v(){var a=$("<div></div>").addClass("wmatile").on("mousedown touchstart",Sa).click(function(c){var h=ta(c);if(h.x!=pa.x||h.y!=pa.y||!b.csrender)return!0;(c=wmajt.detectPointer(c,b))&&fb(c)}),b={div:a,img:$("<img>").load(function(c){$(this).fadeIn(100)}).error(function(c){setTimeout(function(){var h=b.img.attr("src");b.img.attr("src",h.replace(/\?.*/,"")+"?"+Math.random())},
1E3)}).css({width:"128px",height:"128px"}).appendTo(a),can:$("<canvas></canvas>").appendTo(a),ctx:null,csrender:!1,csx:0,csy:0,csz:20,lx:0,ly:0,lz:20,span:$("<span></span>").appendTo(a),debug:$("<span></span>").addClass("wmadbg").css("display","none").appendTo(a),url:"",xhr:null};Y&&(1<N?(b.can.attr({width:128*N,height:128*N}).css({width:"128px",height:"128px"}),b.ctx=b.can[0].getContext("2d"),b.ctx.scale(N,N)):(b.can.attr({width:128,height:128}),b.ctx=b.can[0].getContext("2d")));$(ha).append(b.div);
return b}function x(){var a,b;if(null===ha){$(document).on("mousemove touchmove",function(c){window.scrollTo(0,0);var h=ta(c);null!==ua&&(F-=h.x-ua.x,I-=h.y-ua.y,ua=h,P(),ba&&(ba=!1,ya()));J.shown&&Ha(ca(F+h.x,I+h.y));h=ca(F+H/2,I+G/2);D&&D.setLatLon(h.lat,h.lon);c.preventDefault()}).on("mouseup touchend",function(){ua=null});$("#wma_map").on("dblclick",gb).on("mousedown touchstart",Sa);ha=document.getElementById("wma_map");ia=Math.floor(H/128)+2;na=Math.floor(G/128)+2;ja=[];for(b=0;b<na;++b)for(a=
0;a<ia;++a)ja.push(v());Q.obj=$('<div id="wmamarker"></div>');$(ha).append(Q.obj)}}function T(){var a=$(window).width(),b=$(window).height(),c=Math.floor(a/128)+2,h=Math.floor(b/128)+2,l;H=a;G=b;Y&&(null!==B.canvas&&(B.canvas.attr({width:a*N,height:b*N}).css({width:a+"px",height:b+"px"}),B.c.setTransform(N,0,0,N,0,0)),bldg3d.attr({width:a*N,height:b*N}).css({width:a+"px",height:b+"px"}),bldg3dc.viewport&&bldg3dc.viewport(0,0,a*N,b*N));if(c!=ia||h!=na){ia=c;for(na=h;ja.length<c*h;)ja.push(v());for(l=
0;l<ja.length;++l)l<c*h?ja[l].div.show():ja[l].div.hide();P();$(ha).width(a).height(b)}else B.shown&&ka()}function S(){B.shown?B.canvas.fadeOut(200):B.canvas.fadeIn(200);B.shown=!B.shown}function Ha(a){function b(z){var u;if(0<z.length){var w=z[0].lat+a.lat;w=za(w,z[0].lon/Math.cos(w/180*Math.PI)+a.lon);l.moveTo(w.x-d,w.y-k);for(u=1;u<z.length;++u)w=z[u].lat+a.lat,w=za(w,z[u].lon/Math.cos(w/180*Math.PI)+a.lon),l.lineTo(w.x-d,w.y-k)}}var c,h,l=J.c,y=J.ways,n=J.areas,d=F,k=I;if(null!==l){l.clearRect(0,
0,J.canvas[0].width,J.canvas[0].height);if(null!==n)for(l.fillStyle="rgb(0, 255, 0)",c=0;c<n.length;c++){l.globalCompositeOperation="source-over";for(h=0;h<n[c].outer.length;++h)l.beginPath(),b(n[c].outer[h]),l.closePath(),l.fill();l.globalCompositeOperation="destination-out";for(h=0;h<n[c].inner.length;++h)l.beginPath(),b(n[c].inner[h]),l.closePath(),l.fill()}if(null!==y){l.globalCompositeOperation="source-over";l.lineWidth=4;l.strokeStyle="rgb(0, 255, 0)";l.beginPath();for(c=0;c<y.length;++c)b(y[c]);
l.stroke()}}}function ka(a,b,c,h,l,y){function n(p){var m,q=0;p[0].lon<B.minlon&&(q=2*a);if(0<p.length){var K=za(p[0].lat,p[0].lon,a);var L=K.x;y.moveTo(K.x-z+q,K.y-c);for(m=1;m<p.length;++m)K=la(p[m].lat,p[m].lon,a),L=K.x-L,Math.abs(L)>a&&(q-=2*Math.round(L/(2*a))*a),L=K.x,y.lineTo(K.x-z+q,K.y-c)}}var d=B.ways,k=B.areas;a=a||128*wma_zoomsize[C];b=void 0!==b?b:F;c=void 0!==c?c:I;y=y||B.c;var z=b;if(null!==y)for(h=h||B.canvas[0].width,l=l||B.canvas[0].height,y.clearRect(0,0,h,l),l=-2;2>=l;++l){z=b+
2*l*a;var u=za(0,B.minlon,a);var w=za(0,B.maxlon,a);if(!(0>w.x-z||u.x-z>h)){if(null!==k)for(y.fillStyle="rgb(255, 0, 0)",y.strokeStyle="rgb(0, 0, 0)",y.lineWidth=2,u=0;u<k.length;++u){y.globalCompositeOperation="source-over";for(w=0;w<k[u].outer.length;++w)y.beginPath(),n(k[u].outer[w]),y.closePath(),y.fill(),y.stroke();y.globalCompositeOperation="destination-out";for(w=0;w<k[u].inner.length;++w)y.beginPath(),n(k[u].inner[w]),y.closePath(),y.fill(),y.stroke()}if(null!==d){y.globalCompositeOperation=
"source-over";y.lineWidth=4;y.strokeStyle="rgb(0, 0, 255)";y.beginPath();for(u=0;u<d.length;++u)n(d[u]);y.stroke()}}}}function P(){function a(L,t){function da(ea,V,Aa,Ia,Ja){ea.click(function(Ba){var W=ta(Ba);if(W.x!=pa.x||W.y!=pa.y)Ba.preventDefault();else if(1==Ba.which&&!Ba.ctrlKey){null==Z.panel&&hb();var qa=H-30,Ta=G-80;W=Aa;var Ea=Ia;W>qa&&(Ea=Math.round(Ea*qa/W),W=qa);Ea>Ta&&(W=Math.round(W*Ta/Ea));Z.span.find("img").remove();qa=$("<img/>",{id:"wma_wmaci_image"}).appendTo(Z.span);2*W<Aa?qa.attr({src:Ca(V,
10*Math.floor(W/10),Ja),srcset:Ca(V,20*Math.floor(W/10),Ja)+" 2x"}):W<Aa?qa.attr({src:Ca(V,10*Math.floor(W/10),Ja)}):qa.attr("src","//commons.wikimedia.org/wiki/Special:FilePath/"+V);Z.link.attr("href","//commons.wikimedia.org/wiki/File:"+V).text("[[:commons:File:"+decodeURIComponent(V)+"]]");Z.panel.fadeIn(200);Z.shown=!0;Ba.preventDefault()}}).attr("href","https://commons.wikimedia.org/wiki/File:"+V)}var A,fa=[0,0,5,0,0,2,3,4,5,6,6],ra=[0,0,8,0,0,2,3,4,5,6,6];L.text("");for(A=0;A<t.length;++A){var M=
$("<a></a>");if(!(8>=C&&!t[A].lang&&t[A].wg<wma_median_weights.commons[C])){if("img"in t[A]){da(M,t[A].img,t[A].w,t[A].h,t[A].m5);var R=parseInt(t[A].w)>parseInt(t[A].h)?-2==t[A].style?24:48:Math.floor((-2==t[A].style?24:48)*t[A].w/t[A].h);var ma=Math.floor(R/t[A].w*t[A].h);M.addClass("cthumb").append($("<img/>",{title:decodeURIComponent(t[A].img)}).error(function(){$(this).parent().hide()}).attr({src:Ca(t[A].img,R,t[A].m5),srcset:2*R<=t[A].w?Ca(t[A].img,2*R,t[A].m5)+" 2x":""}).css({width:R+"px",
height:ma+"px"}));18>t[A].head?(M.addClass("dir dir"+t[A].head),R=8):R=6;M.css({top:t[A].ty-R+"px",left:t[A].tx-R+"px"})}else M.addClass("label").addClass("label"+t[A].style).addClass("label-"+t[A].lang).css(Ka).attr({href:"https://"+t[A].lang+".wikipedia.org/wiki/"+t[A].page,target:"_top"}).css({top:t[A].ty-ra[t[A].style]+"px",left:t[A].tx-fa[t[A].style]+"px",direction:isRTL(t[A].lang)?"rtl":"ltr"}),(R=/(.*?)(\s*\([^\)]*\)$|\s*, [^, \(]*$)/.exec(t[A].name))?M.text(R[1]).append($('<span class="hell">&hellip;</span>')).append($('<span class="sufx"></span>').text(R[2]).hide()).hover(function(){$(".hell",
this).hide();$(".sufx",this).show()},function(){$(".hell",this).show();$(".sufx",this).hide()}):M.text(t[A].name);L.append(M)}}}function b(L,t){var da=L.lx,A=L.ly,fa=1<<L.lz-wma_maxlabel,ra=[],M,R=[[],[],[],[]];for(M=0;M<t.length;++M){var ma=128*(da/fa-t[M].dx);var ea=128*(A/fa-(wma_zoomsize[wma_maxlabel]-t[M].dy-1));ma=(t[M].tx+t[M].fx-ma)*fa;var V=(t[M].ty+t[M].fy-ea)*fa;0<=ma&&128>ma&&0<=V&&128>V&&(ea=jQuery.extend(!0,{},t[M]),ea.tx=Math.floor(ma),ea.ty=Math.floor(V),ea.fx=ma-ea.tx,ea.fy=V-ea.ty,
R[Math.floor(ma/64)+2*Math.floor(V/64)].push(ea))}for(M=0;4>M;++M)0<R[M].length&&(R[M].sort(function(Aa,Ia){return Ia.wg-Aa.wg}),ra.push(R[M][0]));a(L.span,ra)}0>I&&(I=0);0>F&&(F+=Math.floor(256*wma_zoomsize[C]));0<F&&(F%=Math.floor(256*wma_zoomsize[C]));var c=Math.floor(F/128)%ia,h=Math.floor(I/128)%na,l=F%128,y=I%128,n,d,k;ib();for(d=0;d<na;d++)for(n=0;n<ia;n++){var z=(n+c)%ia+(d+h)%na*ia;var u=Math.floor(F/128)+n;var w=Math.floor(I/128)+d;var p=wma_tilesets[O].getTileURL(w,u,C);var m=ja[z];m.div.css({left:128*
n-l+"px",top:128*d-y+"px"});if(m.url!=p||wma_highzoom_purge){m.url=p;if(0==O&&12<C){if(m.csrender||(m.csrender=!0,m.img.fadeOut(200)),m.csx!=u||m.csy!=w||m.csz!=C||wma_highzoom_purge)m.can.hide(),m.img.hide(),wmajt.update(u,w,C,m,wma_highzoom_purge)}else{m.csz=C;m.csrender&&m.can.fadeOut(200);if(w>=wma_zoomsize[C]){m.img.fadeOut(0);m.span.text("");continue}m.img.attr("src")!=p?m.img.fadeOut(0).attr("src",p):m.csrender&&m.img.fadeIn(200);m.csrender=!1}null!==m.xhr&&m.xhr.abort();m.lx=u;m.ly=w;m.lz=
C;m.span.html('<span class="loading">'+strings.labelLoading[E]+"</span>");if(C>wma_maxlabel){var q=Math.floor(u/(1<<C-wma_maxlabel));p=Math.floor(w/(1<<C-wma_maxlabel));z=Ua(p,q,wma_maxlabel);p=La(p,q,wma_maxlabel)}else z=Ua(w,u,C),p=La(w,u,C);if(!lc[p]||"filler"in lc[p]){if(lc[p]&&"filler"in lc[p])a(m.span,lc[p].label);else if(C<=wma_maxlabel&&0<C){var K=La(Math.floor(w/2),Math.floor(u/2),C-1);if(lc[K]){q=u%2;lc[p]={label:[],filler:1};for(k=0;k<lc[K].label.length;k++)Math.floor(lc[K].label[k].tx/
64)===u%2&&Math.floor(lc[K].label[k].ty/64)===w%2&&(q=jQuery.extend(!0,{},lc[K].label[k]),q.tx=2*(q.tx+q.fx)-u%2*128,q.ty=2*(q.ty+q.fy)-w%2*128,q.fx=q.tx-Math.floor(q.tx),q.fy=q.ty-Math.floor(q.ty),q.tx=Math.floor(q.tx),q.ty=Math.floor(q.ty),lc[p].label.push(q));a(m.span,lc[p].label)}}(function(L,t,da){m.xhr=$.ajax({url:t,context:m}).success(function(A){try{lc[L]=JSON.parse(A),da?a(this.span,lc[L].label):b(this,lc[L].label)}catch(fa){this.span.html(A)}}).error(function(){this.span.text("")})})(p,
z,C<wma_maxlabel)}else C<wma_maxlabel?a(m.span,lc[p].label):b(m,lc[p].label)}}Ma(Q);for(z=0;z<Na.length;++z)Ma(Na[z]);wma_highzoom_purge=!1;C>=wma_bldg3dzoom&&update3dBuildings();ka()}function X(a){a.clearColor(0,0,0,0);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthMask(!0);a.depthFunc(a.LEQUAL);a.clear(a.COLOR_BUFFER_BIT+a.DEPTH_BUFFER_BIT);var b=a.createProgram(),c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,$("#bldg-vs").text());a.compileShader(c);a.attachShader(b,c);c=a.createShader(a.FRAGMENT_SHADER);
a.shaderSource(c,$("#bldg-fs").text());a.compileShader(c);a.attachShader(b,c);a.linkProgram(b);a.useProgram(b);b.vertexPosAttrib=a.getAttribLocation(b,"pos");a.enableVertexAttribArray(b.vertexPosAttrib);b.normalPosAttrib=a.getAttribLocation(b,"norm");a.enableVertexAttribArray(b.normalPosAttrib);var h=a.getUniformLocation(b,"u_resolution"),l=a.getUniformLocation(b,"u_centerdeg");c=a.getUniformLocation(b,"u_lightdir");r=Math.sqrt(38);a.uniform3f(c,3/r,2/r,5/r);wmajt.registerWebGLBuildingData(5E3,a,
b);return function(){var y=H/2,n=G/2,d=60/(128<<C),k=ca(F+y,I+n);180<k.lon&&(k.lon-=360);a.uniform3f(h,y*d,n*d,850);a.uniform3f(l,k.lon,k.lat,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);wmajt.renderWebGLBuildingData()}}function sa(){function a(m){var q;if(0<u)for(n.moveTo((m[0][0]-k.lon)*w+h,l-(m[0][1]-k.lat)*w),q=1;q<m.length;q++)n.lineTo((m[q][0]-k.lon)*w+h,l-(m[q][1]-k.lat)*w);for(q=0;q<m.length-1;q++)n.moveTo((m[q][0]-k.lon)*w+h,l-(m[q][1]-k.lat)*w),n.lineTo((m[q][0]-k.lon)*p+h,l-(m[q][1]-
k.lat)*p),n.lineTo((m[q+1][0]-k.lon)*p+h,l-(m[q+1][1]-k.lat)*p)}if(Y&&C>wma_bldg3dzoom){var b=wmajt.ref_z(),c=wmajt.zbuild(),h=H/2,l=G/2,y=(128<<C)/60,n=bldg3dc,d,k=ca(F+h,I+l);180<k.lon&&(k.lon-=360);n.lineWidth=.5;n.strokeStyle="rgb(0, 0, 0)";n.beginPath();bldg3dc.clearRect(0,0,H,G);for(d in b){var z=c[d].geo.coordinates;b=3*c[d].tags["building:levels"]||c[d].tags.height;var u=3*c[d].tags["building:min_level"]||c[d].tags.min_height||0;var w=y*(1+u/450);var p=y*(1+b/450);if("Polygon"===c[d].geo.type)for(d=
0;d<z.length;d++)a(z[d]);else a(z)}n.stroke();bldg3d.show();null!==bldg3dtimer&&clearTimeout(bldg3dtimer);setTimeout(update3dBuildings,1500)}else bldg3d.hide()}function Ma(a){var b=la(a.lat,a.lon),c=b.x-F;-100>c&&(c+=256*wma_zoomsize[C]);a.obj.css("left",c-6+"px");a.obj.css("top",b.y-I-6+"px")}function Sa(a){pa=ua=ta(a)}function gb(a){a=ta(a);F+=a.x-H/2;I+=a.y-G/2;ba&&(ba=!1,ya());P();return!1}function fb(a){Oa&&clearTimeout(Oa);Fa.stop(!0).fadeTo(1,1).text(a);Oa=setTimeout(function(){Fa.fadeOut(200)},
5E3)}function aa(a){C=a;bldg3d&&(a>=wma_bldg3dzoom?bldg3d.show():bldg3d.hide())}function Va(a,b){$.ajax({url:"//tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang="+a+"&article="+b,dataType:"json",success:jb})}function kb(a){var b=!1;a=a||window.event;switch(a.keyCode||a.which){case 37:F-=H/1;break;case 38:I-=G/1;break;case 39:F+=H/1;break;case 40:I+=G/1;break;case 187:case 107:Wa();break;case 189:case 109:Xa();break;case 80:wma_highzoom_purge=!0;P();break;case 79:J.shown?(J.shown=!1,J.canvas.fadeOut(200)):
Va(strings.sover[E].site,strings.sover[E].list[0]);break;case 84:va((O+1)%wma_tilesets.length);break;case 76:a="en de fr ru ar he ko ja ml fa commons".split(" ");a=a[($.inArray(U,a)+1)%a.length];Fa.text(wikiminiatlas_sites[a]);Ga(a,!0);break;case 67:Ga("commons",!0);break;case 27:J.shown&&(J.shown=!1,J.canvas.fadeOut(200));Z.shown&&Ya();"hidden"!=xa.style.visibility&&(xa.style.visibility="hidden");break;default:b=!0}ba&&(ba=!1,ya());P();return b}function ta(a){var b=a.originalEvent;return"touches"in
b?{x:b.touches[0].pageX,y:b.touches[0].pageY}:{x:a.pageX,y:a.pageY}}function La(a,b,c){return U+"_"+(wma_zoomsize[c]-a-1)+"_"+b%(2*wma_zoomsize[c])+"_"+c+"_"+wma_tilesets[O].globe}function Ua(a,b,c){return wma_database+"?l="+U+"&a="+(wma_zoomsize[c]-a-1)+"&b="+b%(2*wma_zoomsize[c])+"&z="+c+"&g="+wma_tilesets[O].globe}function Wa(a){var b=ca(F+H/2,I+G/2),c=!1;a||(a=window.event);a&&(a.which?c=3==a.which:a.button&&(c=2==a.button));c?Y&&wma_highzoom_activated?aa(0==O?15:wma_tilesets[O].maxzoom):aa(0==
O?12:wma_tilesets[O].maxzoom):C>=(0!=O||Y&&wma_highzoom_activated?wma_tilesets[O].maxzoom:12)||aa(C+1);a=ba?la(Q.lat,Q.lon):la(b.lat,b.lon);F=a.x-H/2;I=a.y-G/2;P();return!1}function Xa(a){var b=ca(F+H/2,I+G/2),c=!1;a||(a=window.event);a&&(a.which?c=3==a.which:a.button&&(c=2==a.button));if(c)aa(wma_tilesets[O].minzoom);else if(C<=wma_tilesets[O].minzoom)a:for(a=O-1;0<=a;a--){if(wma_tilesets[a].minzoom<C-1){O=a;C--;break a}}else aa(C-1);b=la(b.lat,b.lon);F=b.x-H/2;I=b.y-G/2;P();return!1}function va(a,
b){var c=C;O=a;Ka={color:wma_tilesets[a].linkcolor[0],textShadow:wma_tilesets[a].linkcolor[1]};$("a.label").css(Ka);credit.text("");"credit"in wma_tilesets[a]&&credit.html(wma_tilesets[a].credit);c>(0!=a?wma_tilesets[a].maxzoom:Y&&wma_highzoom_activated?15:12)&&(c=wma_tilesets[a].maxzoom);c<wma_tilesets[a].minzoom&&(c=wma_tilesets[a].minzoom);C!=c&&(a=ca(F+H/2,I+G/2),aa(c),c=la(a.lat,a.lon),F=c.x-H/2,I=c.y-G/2);b||P();Za()}function Ga(a){U=a;for(a=0;a<ia*na;++a)ja[a].url="";P()}function ib(){var a=
ca(F+H/2,I+G/2);var b=Math.cos(.0174532778*a.lat)*wma_tilesets[O].equator*50/(256*wma_zoomsize[C]);a=Math.pow(10,Math.floor(Math.log(b)/Math.log(10)));b=50*a/b;50>5*b&&(b*=5,a*=5);50>2*b&&(b*=2,a*=2);$a.text(1>a?1E3*a+" m":a+" km");ab.width(b)}function ya(){ba?$("#button_target").css("background-position",""):$("#button_target").css("background-position","-40px 0")}function Pa(a,b){a=la(a,b);F=a.x-H/2;I=a.y-G/2;P()}function lb(){Pa(Q.lat,Q.lon);ba=!0;ya()}function za(a,b,c){c=c||128*wma_zoomsize[C];
return{y:Math.floor((.5-a/180)*c),x:Math.floor(b/360*c*2)}}function la(a,b,c){c=c||128*wma_zoomsize[C];b=Math.floor(b/360*c*2);0>b&&(b+=2*c);return{y:Math.floor((.5-a/180)*c),x:b}}function ca(a,b){return{lat:180*(.5-b/(128*wma_zoomsize[C])),lon:a/(256*wma_zoomsize[C])*360}}function Ca(a,b,c){function h(y){for(var n=0;n<l.length;n++)if(y<l[n])return l[n];return y}var l=[120,150,180,200,220,250,300,400];return c?"https://upload.wikimedia.org/wikipedia/commons/thumb/"+c[0]+"/"+c+"/"+a+"/"+h(b)+"px-"+
a:"https://commons.wikimedia.org/w/thumb.php?w="+h(b)+"&f="+a}function Ya(){Z.shown=!1;Z.panel.fadeOut(200)}function hb(){Z.panel=$("<div></div>",{id:"wma_wmaci_panel"}).append($("<div></div>",{id:"wma_wmaci_panel_sub"}).append(Z.span=$("<span></span>")).append($("<br/>")).append(Z.link=$("<a></a>",{id:"wma_wmaci_link",target:"_top"}).click(function(a){a.stopPropagation()}))).css("visibility","visible").hide().click(Ya).appendTo(g)}function mb(){var a=window.open("","showwin","left=0, top=0, width="+
screen.width+", height="+screen.height+", toolbar=0, resizable=0, fullscreen=1"),b=e.page,c=e.lang,h=wma_tilesets[O].globe,l=ca(F+H/2,I+G/2);a.document.location=document.location.pathname+"?"+Q.lat+"_"+Q.lon+"_0_0_"+U+"_"+C+"_"+Da+"_"+l.lat+"_"+l.lon+"&globe="+h+"&page="+b+"&lang="+c}function Qa(a,b){return function(c){window.parent.postMessage(b+", "+a,"*")}}function Ra(a){Y&&(a=a||B,null===a.canvas&&(a.canvas=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({width:H+"px",height:G+
"px"}).appendTo($(ha)),a.c=a.canvas[0].getContext("2d"),a.c.scale(N,N),a.shown=!0,a.drawn=!0,a==B&&$("#button_kml").show()),a===B&&D&&D.updateKML())}function nb(a){a=a.originalEvent;var b=JSON.parse(a.data),c;if("coords"in b)for(c=0;c<b.coords.length;++c){var h={obj:null,lat:b.coords[c].lat,lon:b.coords[c].lon};if(1E-4<Math.abs(h.lat-Q.lat)||1E-4<Math.abs(h.lon-Q.lon))h.obj=$("<div></div>").attr("title",decodeURIComponent(b.coords[c].title)).addClass("emarker").mouseover(Qa(c,"highlight")).mouseout(Qa(c,
"unhighlight")).click(Qa(c,"scroll")).appendTo($(ha)),Ma(h),Na.push(h)}if("ways"in b||"areas"in b)Ra(),B.ways=b.ways||null,B.areas=b.areas||null,ka();if("minlon"in b&&"maxlon"in b){if(!("maxlon"in B)||b.maxlon>B.maxlon)B.maxlon=b.maxlon;if(!("minlon"in B)||b.minlon<B.minlon)B.minlon=b.minlon}"getcoords"in b&&(c={query:b.getcoords,response:{topleft:ca(F,I),rightbottom:ca(F+H,I+G)}},window.parent&&window.parent.postMessage(JSON.stringify(c),a.origin));"moveto"in b&&(a=b.moveto,"zoom"in a&&aa(a.zoom),
"lat"in a&&"lon"in a&&(Pa(a.lat,a.lon),D&&D.setLatLon(a.lat,a.lon)))}function bb(a,b){function c(d){var k,z=180/Math.PI,u=Math.PI/2,w=180/2.003750834E7,p=[],m=-Infinity,q=Infinity;for(k=0;k<d.length;++k){var K=d[k][0]*w;var L=z*(2*Math.atan(Math.exp(d[k][1]*w/z))-u);K>m&&(m=K);K<q&&(q=K);L>b.maxlat&&(b.maxlat=L);L<b.minlat&&(b.minlat=L);p.push({lat:L,lon:K})}"maxlon"in b&&"maxlon"in b?(d=[{r:Math.max(b.maxlon,m),l:Math.min(b.minlon,q)},{r:Math.max(b.maxlon,m+360),l:Math.min(b.minlon,q+360)},{r:Math.max(b.maxlon+
360,m),l:Math.min(b.minlon+360,q)}],d.sort(function(t,da){return t.r-t.l-(da.r-da.l)}),b.minlon=d[0].l,b.maxlon=d[0].r):(b.maxlon=m,b.minlon=q);return p}function h(d){var k={outer:[],inner:[]},z;k.outer.push(c(d[0]));for(z=1;z<d.length;z++)k.inner.push(c(d[z]));b.areas?b.areas.push(k):b.areas=[k]}function l(d){d=[c(d)];b.ways?b.ways.push.apply(b.ways,d):b.ways=d}function y(d){var k;switch(d.type){case "LineString":l(d.coordinates);break;case "MultiLineString":for(k=0;k<d.coordinates.length;k++)l(d.coordinates[k]);
break;case "Polygon":h(d.coordinates);break;case "MultiPolygon":for(k=0;k<d.coordinates.length;k++)h(d.coordinates[k])}}var n;if("type"in a)if("GeometryCollection"==a.type)for(n=0;n<a.geometries.length;++n)y(a.geometries[n]);else y(a)}function ob(a){bb(a,B);if(B.ways||B.areas)Ra(),ka();if(B.maxlon&&B.minlon&&-Infinity<B.maxlat&&Infinity>B.minlat){a=(B.maxlon+B.minlon)/2;var b=(B.maxlat+B.minlat)/2,c=(B.maxlon-B.minlon)/180*384,h=(B.maxlat-B.minlat)/180*384,l;for(l=0;12>l&&!(c>H/2||h>G/2);++l)c*=2,
h*=2;aa(l);Pa(b,a)}}function jb(a){function b(n){var d,k=0;n[0].lon<J.minlon&&(k=360);for(d=0;d<n.length;++d)n[d].lon-=l-k,n[d].lon*=Math.cos(n[d].lat/180*Math.PI),n[d].lat-=y}var c=J.c,h=J.canvas;h?J={shown:!0,drawn:!1,canvas:h,c:c,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity}:(J={shown:!0,drawn:!1,canvas:null,c:null,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity},Ra(J));bb(a,J);a=J.areas;c=J.ways;var l=(J.maxlon+J.minlon)/2,y=(J.maxlat+J.minlat)/2;if(null!==a)for(i=0;i<a.length;++i){for(j=
0;j<a[i].outer.length;++j)b(a[i].outer[j]);for(j=0;j<a[i].inner.length;++j)b(a[i].inner[j])}if(null!==c)for(i=0;i<c.length;++i)latNorm(c[i]);J.canvas.fadeIn(200)}var H=500,G=300,ha=null,cb=!1,ia,na,ja,ua=null,pa={x:-1,y:-1},F=0,I=0,C=1,db=0,Q={obj:null,lat:0,lon:0},Na=[],ba=!0,xa=null,Da="de",U="",E="en",oa=!1,O=0,$a=null,ab=null,wa=null,eb=null,Z={shown:!1,panel:null,image:null,link:null};e=e||parseParams(window.location.href);var J={},B={shown:!1,drawn:!1,canvas:null,c:null,ways:null,areas:null,
maxlat:-Infinity,minlat:Infinity},Ka={},D=!1,Za=null,Y="HTMLCanvasElement"in window,N="devicePixelRatio"in window?window.devicePixelRatio:1,Fa,Oa=null;(function(){var a=e.wma||window.location.search.substr(1);var b=e.page,c=e.lang;wa=e.globe||"Earth";b&&Y&&$.ajax({url:"//tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang="+c+"&article="+b,dataType:"json",success:ob});Za=function(){if(!Y)return function(){};var d=0==O?256:128,k=$("<canvas></canvas>").attr({width:24*d/3,height:12*d/3}).css({display:"none"}),
z=$("<canvas></canvas>").attr({width:6*d,height:3*d}).css({display:"none"}),u=$("<canvas></canvas>").attr({width:6*d,height:3*d}).css({display:"none"}),w=$("<div></div>").css({position:"absolute",width:"80px",height:"80px",bottom:"20px",right:"5px",zIndex:50,display:"none",borderRadius:"40px","-moz-border-radius":"40px",boxShadow:"5px 5px 25px rgba(0, 0, 0, 0.3)"}),p=$("<canvas></canvas>").attr({width:160,height:160}).css({position:"absolute",width:"80px",height:"80px",bottom:"20px",right:"5px",zIndex:51,
display:"none"});$("body").append(p).append(k).append(w);return function(){function m(A,fa){var ra=new Image;$(ra).load(function(){t.drawImage(ra,A*d,fa*d);L++;if(18==L){da.drawImage(z[0],0,0,24*d/3,12*d/3);if(!D){D=wmaGlobe3d(p[0],k[0]);if(!D)return;D.setLatLon(Q.lat,Q.lon);w.fadeIn(200);p.fadeIn(200);D.mapContext=da;D.tmap=z[0];D.tmapContext=t;D.omap=u[0];D.omapContext=u[0].getContext("2d");D.updateTiles=function(){D.mapContext.clearRect(0,0,24*d/3,12*d/3);D.mapContext.drawImage(D.tmap,0,0,24*d/
3,12*d/3);D.updateTexture();D.draw()};D.updateKML=function(){D.mapContext.clearRect(0,0,24*d/3,12*d/3);D.mapContext.drawImage(D.tmap,0,0,24*d/3,12*d/3);D.mapContext.save();D.mapContext.globalAlpha=.5;ka(3*d,0,0,6*d,3*d,D.omapContext);D.mapContext.drawImage(D.omap,0,0,24*d/3,12*d/3);D.mapContext.restore();D.updateTexture();D.draw()}}B.canvas?D.updateKML():D.updateTiles()}}).attr("src",wma_tilesets[O].getTileURL(fa,A,0,!0))}var q,K,L=0,t=z[0].getContext("2d"),da=k[0].getContext("2d");t.clearRect(0,
0,6*d,3*d);for(q=0;6>q;++q)for(K=0;3>K;++K)m(q,K)}}();c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)/;c.test(a)&&(c.exec(a),Q.lat=parseFloat(RegExp.$1),Q.lon=parseFloat(RegExp.$2),H=$(window).width(),G=$(window).height(),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)/,c.test(a)&&(c.exec(a),U=RegExp.$5),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)/,c.test(a)&&(c.exec(a),db=parseInt(RegExp.$6,10),aa(db),aa(Math.min(C,0!=O?wma_tilesets[O].maxzoom:Y&&wma_highzoom_activated?15:12)),aa(Math.max(C,
wma_tilesets[O].minzoom))),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)_([a-z-]+)/,c.test(a)?(c.exec(a),Da=RegExp.$7):Da=U,c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)_([a-z-]+)_([\d+-.]+)_([\d+-.]+)/,c.test(a)?(a=la(RegExp.$8,RegExp.$9),ba=!1,cb=!0):(a=la(Q.lat,Q.lon),ba=!0),F=a.x-H/2,I=a.y-G/2);U=U.split("-")[0];E=Da;if("co"==E||"commons"==E)E="en";oa=isRTL(E);wmajt.setUILang(E);for(n in strings)strings[n][E]||(strings[n][E]=strings[n].en);var h='<div class="bsprite" id="button_plus" title="'+
strings.zoomIn[E]+'"></div><div class="bsprite" id="button_minus" title="'+strings.zoomOut[E]+'"></div><div class="bsprite" id="button_target" title="'+strings.center[E]+'"></div><div class="bsprite" id="button_kml" title="'+strings.kml[E]+'"></div><div class="bsprite" id="button_menu" title="'+strings.settings[E]+'"></div>';h=cb?h+('<img id="button_hide" src="'+wma_imgbase+'button_hide.png" title="'+strings.close[E]+'" onclick="window.close()">'):h+('<img id="button_fs" src="'+wma_imgbase+'button_fs.png" title="'+
strings.fullscreen[E]+'">');h+='<div id="wma_map" style="position:absolute; width:'+H+"px; height:"+G+'px; cursor: move; background-color: #aaaaaa;"></div>';h+='<div id="scalebox"><div id="scalebar"></div><div id="scalelabel">null</div></div>';h+='<div id="synopsis"><p id="synopsistext"></p></div>';h+='<div id="wma_settings"><h4>'+strings.settings[E]+'</h4><p class="option">Size Comparison <select id="wmaSetSizeOverlay">';a=strings.sover[E].list;h+='<option value="-" class="bg" selected="selected">-</option>';
h+='<option value="+" class="bg">'+strings.other[E]+"</option>";h+='<option value="*" class="bg">'+decodeURIComponent(b)+"</option>";for(n in a)h+='<option value="'+a[n]+'">'+a[n]+"</option>";h+='</select></p><a href="//wma.wmflabs.org/" target="_top"><img src="//upload.wikimedia.org/wikipedia/commons/4/46/Powered_by_labs_button.png" border="0"></a></div>';g.html(h).append($("<span></span>",{id:"wmacredit"}).append($("<a></a>",{href:"//meta.wikimedia.org/wiki/WikiMiniAtlas/"+Da,target:"_top"}).text("WikiMiniAtlas")).append(credit=
$("<span></span>")));var l=new wmaMenu(oa);(function(){var d;l.addTitle(strings.labelSet[E],oa);var k='<select id="wmaLabelSet">';U in wikiminiatlas_sites&&(k+='<option value="'+U+'" selected="selected">'+wikiminiatlas_sites[U]+"</option>");U!==E&&E in wikiminiatlas_sites&&(k+='<option value="'+E+'">'+wikiminiatlas_sites[E]+"</option>");if(U in wikiminiatlas_sites||E in wikiminiatlas_sites)k+="<option disabled></option>";for(d in wikiminiatlas_sites)"commons"!==d&&(k+='<option value="'+d+'">'+wikiminiatlas_sites[d]+
"</option>");var z=l.addGroup([["LANG",k+"</select>"],["commons",strings.commons[E]]],function(p){"LANG"==p&&(p=z.items.LANG.find("select option:selected").val());Ga(p)},"commons"==U?"commons":"LANG",oa);z.items.LANG.find("select").click(function(p){p.stopPropagation()}).change(function(p){z.items.LANG.click()});l.addSep();var u={};for(d=0;d<wma_tilesets.length;++d)k=wma_tilesets[d].globe,u[k]=u[k]||[],u[k].push([d,strings[wma_tilesets[d].name][E]||""]);h='<select id="wmaGlobeSet">';for(d in u)h+=
'<option value="'+d+'"',d==wa&&(h+='selected="selected"'),h+=">"+strings["map"+d][E]+"</option>";h+="</select>";l.addTitle(strings.solarSystem[E],oa);var w=l.addItem(h,void 0,oa);w.find("select").click(function(p){p.stopPropagation()}).change(function(p){p=$(this).find("option:selected").val();u[wa].hide();u[p].show();wa=p;w.click();va(u[p].current())});l.addSep();l.addTitle(strings.mode[E],oa);for(d in u)u[d]=l.addGroup(u[d],va,u[d][0][0],oa),d!==wa&&u[d].hide(),l.addSep();l.addItem(strings.sizeRef[E],
f)})();$("#button_menu").click(function(){l.toggle()});$("#button_fs").click(mb);$("#wma_widget").append(l.div.css({right:"40px",top:"26px"}));a=strings.dyk[E];var y=$("<div></div>").html(a[Math.floor(Math.random()*a.length)]).addClass("news");Fa=$("<div></div>").css({position:"absolute",top:"30px",left:"60px",zIndex:100,fontSize:"40px",color:"white",textShadow:"1px 1px 5px black",fontWeight:"bold"}).appendTo("#wma_widget");wmaNews[0]=function(){va(4)};wmaNews[1]=function(){Y?(F=19039255,I=3363704,
aa(15),va(0)):y.text("Sorry, your browser does not support the canvas element! Try FireFox or Google Chrome.")};$("#wma_widget").append(y);y.click(function(){y.fadeOut()});setTimeout(function(){y.fadeOut()},1E4);$a=$("#scalelabel");ab=$("#scalebar");document.getElementById("button_target");xa=document.getElementById("wma_settings");$("#wmaLabelSet").change(function(){Ga(this.value)});$("#wmaSetSizeOverlay").change(function(){a:{var d=strings.sover[E].site,k=this.value;if("+"==k&&(k=prompt("Enter article title to use as overlay"),
!k))break a;"*"==k&&(k=e.page,d=e.lang);"-"==k?(J.shown=!1,J.canvas.fadeOut(200)):(Va(d,k),f())}});$("#button_plus").on("mousedown",Wa);$("#button_minus").on("mousedown",Xa);$("#button_target").on("click",lb);$("#button_kml").on("click",S);$(document).on("keydown",kb);$(document).on("contextmenu",function(){return!1});$("body").on("dragstart",function(){return!1});$("#wma_map").click(function(d){d=ta(d);if(d.x!=pa.x||d.y!=pa.y)return!1});x();bldg3d=$('<canvas class="wmakml"></canvas>').attr({width:H*
N,height:G*N}).css({zIndex:19,opacity:.75,width:H+"px",height:G+"px"}).appendTo($(ha));if(Y){try{bldg3dc=bldg3d[0].getContext("experimental-webgl"),update3dBuildings=X(bldg3dc)}catch(d){bldg3dc=null,bldg3d.remove(),bldg3d=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({zIndex:19,opacity:.75,width:H+"px",height:G+"px"}).appendTo($(ha))}bldg3dc&&!1!==update3dBuildings||(bldg3dc=bldg3d[0].getContext("2d"),bldg3dc.scale(N,N),update3dBuildings=sa)}$(window).resize(T);var n;for(n=
0;n<wma_tilesets.length&&wma_tilesets[n].globe!=wa;++n);va(n,!0);P();ya();eb=/https?:\/\/([a-z-]+)\.wikipedia\.org\/wiki\/(.*)/;$("#wma_widget").mouseover(function(d){if(d.metaKey||d.ctrlKey)if(d.target.href&&eb.test(d.target.href)){d=RegExp.$1;var k=RegExp.$2;$.getJSON("https://"+d+".wikipedia.org/api/rest_v1/page/summary/"+k,function(z){$("#synopsistext").css({direction:z.dir,"padding-left":"0.5em","padding-right":"0.5em"}).html(z.extract_html);if("thumbnail"in z){var u=new Image,w=z.thumbnail.width/
2,p=z.thumbnail.height/2,m="ltr"==z.dir?"left":"right";$(u).css({width:w+"px",height:p+"px",position:"absolute",bottom:"0.5em"}).css(m,"10px").load(function(){$("#synopsistext").css("padding-"+m,w+20+"px").append($(u))}).attr("src",z.thumbnail.source)}$("#synopsis").fadeIn("slow");setTimeout(function(){var q=$("#synopsistext").outerHeight(!0),K=G/2;$("#synopsis").animate({height:q<K?q:K})},500)})}else $("#synopsis").fadeOut("fast")});$("#synopsis").click(function(d){d.target==this&&$("#synopsis").fadeOut("fast")});
if(window.postMessage&&($(window).on("message",nb),window!=window.top))try{window.parent.postMessage("request","*")}catch(d){}})()}function wmaMenu(g){this.div=$("<div></div>").addClass("wmamenu").css("direction",!0===g?"rtl":"");this.parent=null;this.shown=!1}wmaMenu.prototype.addTitle=function(g,e){return $("<div></div>").addClass("wmamenutitle").html(g).css("direction",!0===e?"rtl":"").appendTo(this.div)};
wmaMenu.prototype.addItem=function(g,e,f){e=e||function(){};var v=this,x=$("<div></div>").addClass("wmamenuitem").html(g).css("direction",!0===f?"rtl":"").mouseenter(function(){x.css("background-color","#AAA")}).mouseleave(function(){x.css("background-color","")}).click(function(){e();v.close()}).appendTo(this.div);return x};
wmaMenu.prototype.addMenu=function(g,e,f){var v=$("<div></div>").addClass("wmasubmenu").html(g).css("direction",!0===f?"rtl":"").mouseenter(function(){v.css("background-color","#AAA")}).mouseleave(function(){v.css("background-color","");e.hide()}).click(function(){e.move(v.width(),0);e.show()}).append(e.div).appendTo(this.div);e.parent=this;return v};
wmaMenu.prototype.addCheck=function(g,e,f,v){function x(){f?T.addClass("wmamenuchecked"):T.removeClass("wmamenuchecked")}var T=this.addItem(g,function(){f=!f;x();e(f)},v);e=e||function(){};x();return{toggle:function(S){void 0===S&&(f=!f,x())},check:x,item:T}};
wmaMenu.prototype.addGroup=function(g,e,f,v){function x(X){if(X!=ka){for(var sa in S)sa==X?S[sa].addClass("wmamenuselected"):S[sa].removeClass("wmamenuselected");ka=X}}function T(X,sa){S[X]=Ha.addItem(sa,function(){x(X);e(X)},v)}var S={},Ha=this,ka=-1;f=f||0;e=e||function(){};for(var P=0;P<g.length;++P)"object"===typeof g[P]?T(g[P][0],g[P][1]):T(P,g[P]);x(f);return{items:S,select:x,current:function(){return ka},hide:function(){for(var X in S)S[X].hide()},show:function(){for(var X in S)S[X].show()}}};
wmaMenu.prototype.addSep=function(){this.div.children().last().css({"border-bottom-style":"solid","border-bottom-width":"1px","border-bottom-color":"#AAA"})};wmaMenu.prototype.show=function(){this.div.fadeIn(200);this.shown=!0};wmaMenu.prototype.hide=function(){this.div.fadeOut(200);this.shown=!1};wmaMenu.prototype.toggle=function(){this.shown?this.hide():this.show()};wmaMenu.prototype.close=function(){this.hide();this.parent&&this.parent.close()};
wmaMenu.prototype.move=function(g,e){this.div.css({top:e+"px",left:g+"px"})};
