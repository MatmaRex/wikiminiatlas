var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(f,d,e){f instanceof String&&(f=String(f));for(var v=f.length,A=0;A<v;A++){var S=f[A];if(d.call(e,S,A,f))return{i:A,v:S}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,d,e){if(f==Array.prototype||f==Object.prototype)return f;f[d]=e.value;return f};$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<f.length;++d){var e=f[d];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,d){var e=$jscomp.propertyToPolyfillSymbol[d];if(null==e)return f[d];e=f[e];return void 0!==e?e:f[d]};
$jscomp.polyfill=function(f,d,e,v){d&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,d,e,v):$jscomp.polyfillUnisolated(f,d,e,v))};$jscomp.polyfillUnisolated=function(f,d,e,v){e=$jscomp.global;f=f.split(".");for(v=0;v<f.length-1;v++){var A=f[v];if(!(A in e))return;e=e[A]}f=f[f.length-1];v=e[f];d=d(v);d!=v&&null!=d&&$jscomp.defineProperty(e,f,{configurable:!0,writable:!0,value:d})};
$jscomp.polyfillIsolated=function(f,d,e,v){var A=f.split(".");f=1===A.length;v=A[0];v=!f&&v in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var S=0;S<A.length-1;S++){var R=A[S];if(!(R in v))return;v=v[R]}A=A[A.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?v[A]:null;d=d(e);null!=d&&(f?$jscomp.defineProperty($jscomp.polyfills,A,{configurable:!0,writable:!0,value:d}):d!==e&&(void 0===$jscomp.propertyToPolyfillSymbol[A]&&($jscomp.propertyToPolyfillSymbol[A]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(A):
$jscomp.POLYFILL_PREFIX+A),A=$jscomp.propertyToPolyfillSymbol[A],$jscomp.defineProperty(v,A,{configurable:!0,writable:!0,value:d})))};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(d,e){return $jscomp.findInternal(this,d,e).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(d,e,v){var A=this.length||0;0>e&&(e=Math.max(0,A+e));if(null==v||v>A)v=A;v=Number(v);0>v&&(v=Math.max(0,A+v));for(e=Number(e||0);e<v;e++)this[e]=d;return this}},"es6","es3");$jscomp.typedArrayFill=function(f){return f?f:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");var wma_highzoom_activated=!0,wma_highzoom_purge=!1,wma_bldg3dzoom=14,bldg3d=null,bldg3dc=null,bldg3dtimer=null,update3dBuildings,credit,wmaNews=[],wma_imgbase="tiles/",wma_database="label.php",wma_tilebase=".wma.wmflabs.org/tiles/",wma_maxlabel=13,i,wma_zoomsize=[3];for(i=1;40>i;i++)wma_zoomsize[i]=2*wma_zoomsize[i-1];
var lc={},wma_tilesets=[{name:"mapFull",globe:"Earth",credit:' / Map data \u00a9 <a href="http://www.openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://www.opendatacommons.org/licenses/odbl">License</a>',getTileURL:function(f,d,e,v){me=wma_tilesets[0];return v||"https:"==document.location.protocol?7<=e?wma_imgbase+"mapnik/"+e+"/"+f+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png":wma_imgbase+"mapnik/"+e+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png":7<=e?"//"+(d+f)%8+wma_tilebase+"mapnik/"+
e+"/"+f+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png":"//"+(d+f)%8+wma_tilebase+"mapnik/"+e+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["#2255aa","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:40075,maxzoom:20,minzoom:0},{name:"mapPhysical",globe:"Earth",getTileURL:function(f,d,e){return wma_imgbase+"relief/"+e+"/"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["#2255aa","white 0pt 0pt 2pt"],equator:40075,maxzoom:5,minzoom:0},{name:"mapLandsat",globe:"Earth",
getTileURL:function(f,d,e,v){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return v||"https:"==document.location.protocol?wma_imgbase+"mapnik/sat/"+e+"/"+f+"/"+f+"_"+d%(2*wma_zoomsize[e])+".png":"//"+(d+f)%8+wma_tilebase+"mapnik/sat/"+e+"/"+f+"/"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["white","black 0pt 0pt 2pt"],equator:40075,maxzoom:13,minzoom:0},{name:"mapCoastline",globe:"Earth",getTileURL:function(f,d,e){return wma_imgbase+"plain/"+e+"/tile_"+f+"_"+d%(2*wma_zoomsize[e])+".png"},linkcolor:["#2255aa",
"1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:40075,maxzoom:7,minzoom:0},{name:"mapPhysical",globe:"Moon",getTileURL:function(f,d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"lro_moon/lromoon_00"+(5-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:10940.475,maxzoom:5,minzoom:0},{name:"mapLandsat",globe:"Moon",getTileURL:function(f,
d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"moon/"+e+"/"+f+"_"+d+".jpg"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:10940.475,maxzoom:7,minzoom:0},{name:"mapLandsat",globe:"Mars",getTileURL:function(f,d,e){d=(d+wma_zoomsize[e])%(2*wma_zoomsize[e]);0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"mars/mars_00"+(5-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["white","black 0pt 0pt 2pt"],
equator:21359.975,maxzoom:5,minzoom:0},{name:"mapPhysical",globe:"Venus",getTileURL:function(f,d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"venus/venus_00"+(3-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:38024.6,maxzoom:3,minzoom:0},{name:"mapLandsat",globe:"Mercury",getTileURL:function(f,d,e){d=(d+1*wma_zoomsize[e])%(2*wma_zoomsize[e]);0>d&&(d+=2*
wma_zoomsize[e]);e=6-e;return wma_imgbase+"mercury/"+(3>e?e+"/":"")+(0==e?Math.floor(d/100)+"/":"")+"merc_00"+e+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["white","1px 0px 2px black, 0px -1px 2px black, 0px 1px 2px black, -1px 0px 2px black"],equator:15329.1,maxzoom:6,minzoom:0},{name:"mapLandsat",globe:"Io",getTileURL:function(f,d,e){d=(d+wma_zoomsize[e])%(2*wma_zoomsize[e]);0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"io/io_00"+(4-e)+"_"+("000"+d).substr(-3)+"_"+("000"+
f).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:11443.6,maxzoom:4,minzoom:0},{name:"mapLandsat",globe:"Titan",getTileURL:function(f,d,e){d%=2*wma_zoomsize[e];0>d&&(d+=2*wma_zoomsize[e]);return wma_imgbase+"titan/titan_00"+(3-e)+"_"+("000"+d).substr(-3)+"_"+("000"+f).substr(-3)+".png"},linkcolor:["black","1px 0px 2px white, 0px -1px 2px white, 0px 1px 2px white, -1px 0px 2px white"],equator:16190.3,maxzoom:3,minzoom:0}];
function parseParams(f){var d={},e,v=f.substr(f.indexOf("?")+1).split("&");for(e=0;e<v.length;++e)f=v[e].split("="),d[f[0]]=f[1];return d}function isRTL(f){return 0<=$.inArray(f,["ar","he","fa"])}
function wikiminiatlasInstall(f,d){function e(){ya.style.visibility="visible"!=ya.style.visibility?"visible":"hidden";return!1}function v(){var a=$("<div></div>").addClass("wmatile").on("mousedown touchstart",Pa).click(function(c){var k=ua(c);if(k.x!=qa.x||k.y!=qa.y||!b.csrender)return!0;(c=wmajt.detectPointer(c,b))&&cb(c)}),b={div:a,img:$("<img>").load(function(c){$(this).fadeIn(100)}).error(function(c){setTimeout(function(){var k=b.img.attr("src");b.img.attr("src",k.replace(/\?.*/,"")+"?"+Math.random())},
1E3)}).appendTo(a),can:$("<canvas></canvas>").appendTo(a),ctx:null,csrender:!1,csx:0,csy:0,csz:20,lx:0,ly:0,lz:20,span:$("<span></span>").appendTo(a),debug:$("<span></span>").addClass("wmadbg").css("display","none").appendTo(a),url:"",xhr:null};W&&(1<N?(b.can.attr({width:128*N,height:128*N}).css({width:"128px",height:"128px"}),b.ctx=b.can[0].getContext("2d"),b.ctx.scale(N,N)):(b.can.attr({width:128,height:128}),b.ctx=b.can[0].getContext("2d")));$(ha).append(b.div);return b}function A(){var a,b;if(null===
ha){$(document).on("mousemove touchmove",function(c){window.scrollTo(0,0);var k=ua(c);null!==va&&(F-=k.x-va.x,I-=k.y-va.y,va=k,P(),Z&&(Z=!1,za()));J.shown&&Ga(aa(F+k.x,I+k.y));k=aa(F+H/2,I+G/2);D&&D.setLatLon(k.lat,k.lon);c.preventDefault()}).on("mouseup touchend",function(){va=null});$("#wma_map").on("dblclick",db).on("mousedown touchstart",Pa);ha=document.getElementById("wma_map");ia=Math.floor(H/128)+2;oa=Math.floor(G/128)+2;ja=[];for(b=0;b<oa;++b)for(a=0;a<ia;++a)ja.push(v());Q.obj=$('<div id="wmamarker"></div>');
$(ha).append(Q.obj)}}function S(){var a=$(window).width(),b=$(window).height(),c=Math.floor(a/128)+2,k=Math.floor(b/128)+2,l;H=a;G=b;W&&(null!==B.canvas&&(B.canvas.attr({width:a*N,height:b*N}).css({width:a+"px",height:b+"px"}),B.c.setTransform(N,0,0,N,0,0)),bldg3d.attr({width:a*N,height:b*N}).css({width:a+"px",height:b+"px"}),bldg3dc.viewport&&bldg3dc.viewport(0,0,a*N,b*N));if(c!=ia||k!=oa){ia=c;for(oa=k;ja.length<c*k;)ja.push(v());for(l=0;l<ja.length;++l)l<c*k?ja[l].div.show():ja[l].div.hide();P();
$(ha).width(a).height(b)}else B.shown&&ka()}function R(){B.shown?B.canvas.fadeOut(200):B.canvas.fadeIn(200);B.shown=!B.shown}function Ga(a){function b(x){var q;if(0<x.length){var u=x[0].lat+a.lat;u=Aa(u,x[0].lon/Math.cos(u/180*Math.PI)+a.lon);l.moveTo(u.x-g,u.y-h);for(q=1;q<x.length;++q)u=x[q].lat+a.lat,u=Aa(u,x[q].lon/Math.cos(u/180*Math.PI)+a.lon),l.lineTo(u.x-g,u.y-h)}}var c,k,l=J.c,y=J.ways,n=J.areas,g=F,h=I;if(null!==l){l.clearRect(0,0,J.canvas[0].width,J.canvas[0].height);if(null!==n)for(l.fillStyle=
"rgb(0, 255, 0)",c=0;c<n.length;c++){l.globalCompositeOperation="source-over";for(k=0;k<n[c].outer.length;++k)l.beginPath(),b(n[c].outer[k]),l.closePath(),l.fill();l.globalCompositeOperation="destination-out";for(k=0;k<n[c].inner.length;++k)l.beginPath(),b(n[c].inner[k]),l.closePath(),l.fill()}if(null!==y){l.globalCompositeOperation="source-over";l.lineWidth=4;l.strokeStyle="rgb(0, 255, 0)";l.beginPath();for(c=0;c<y.length;++c)b(y[c]);l.stroke()}}}function ka(a,b,c,k,l,y){function n(t){var m,p=0;
t[0].lon<B.minlon&&(p=2*a);if(0<t.length){var M=Aa(t[0].lat,t[0].lon,a);var K=M.x;y.moveTo(M.x-x+p,M.y-c);for(m=1;m<t.length;++m)M=la(t[m].lat,t[m].lon,a),K=M.x-K,Math.abs(K)>a&&(p-=2*Math.round(K/(2*a))*a),K=M.x,y.lineTo(M.x-x+p,M.y-c)}}var g=B.ways,h=B.areas;a=a||128*wma_zoomsize[C];b=void 0!==b?b:F;c=void 0!==c?c:I;y=y||B.c;var x=b;if(null!==y)for(k=k||B.canvas[0].width,l=l||B.canvas[0].height,y.clearRect(0,0,k,l),l=-2;2>=l;++l){x=b+2*l*a;var q=Aa(0,B.minlon,a);var u=Aa(0,B.maxlon,a);if(!(0>u.x-
x||q.x-x>k)){if(null!==h)for(y.fillStyle="rgb(255, 0, 0)",y.strokeStyle="rgb(0, 0, 0)",y.lineWidth=2,q=0;q<h.length;++q){y.globalCompositeOperation="source-over";for(u=0;u<h[q].outer.length;++u)y.beginPath(),n(h[q].outer[u]),y.closePath(),y.fill(),y.stroke();y.globalCompositeOperation="destination-out";for(u=0;u<h[q].inner.length;++u)y.beginPath(),n(h[q].inner[u]),y.closePath(),y.fill(),y.stroke()}if(null!==g){y.globalCompositeOperation="source-over";y.lineWidth=4;y.strokeStyle="rgb(0, 0, 255)";y.beginPath();
for(q=0;q<g.length;++q)n(g[q]);y.stroke()}}}}function P(){function a(K,w){var z,ma=[0,0,5,0,0,2,3,4,5,6,6],fa=[0,0,8,0,0,2,3,4,5,6,6];K.text("");for(z=0;z<w.length;++z){var ba=$("<a></a>");if("img"in w[z]){(function(ca,da,ea,na){ba.click(function(ra){var T=ua(ra);if(T.x!=qa.x||T.y!=qa.y)ra.preventDefault();else if(1==ra.which&&!ra.ctrlKey){null==X.panel&&eb();var sa=H-30,Qa=G-80;T=da;var Da=ea;T>sa&&(Da=Math.round(Da*sa/T),T=sa);Da>Qa&&(T=Math.round(T*Qa/Da));X.span.find("img").remove();sa=$("<img/>",
{id:"wma_wmaci_image"}).appendTo(X.span);2*T<da?sa.attr({src:Ba(ca,10*Math.floor(T/10),na),srcset:Ba(ca,20*Math.floor(T/10),na)+" 2x"}):T<da?sa.attr({src:Ba(ca,10*Math.floor(T/10),na)}):sa.attr("src","//commons.wikimedia.org/wiki/Special:FilePath/"+ca);X.link.attr("href","//commons.wikimedia.org/wiki/File:"+ca).text("[[:commons:File:"+decodeURIComponent(ca)+"]]");X.panel.fadeIn(200);X.shown=!0;ra.preventDefault()}}).attr("href","//commons.wikimedia.org/wiki/File:"+w[z].img)})(w[z].img,w[z].w,w[z].h,
w[z].m5);var L=parseInt(w[z].w)>parseInt(w[z].h)?-2==w[z].style?24:48:Math.floor((-2==w[z].style?24:48)*w[z].w/w[z].h);ba.addClass("cthumb").append($("<img/>",{title:decodeURIComponent(w[z].img)}).error(function(){$(this).parent().hide()}).attr({src:Ba(w[z].img,L,w[z].m5),srcset:2*L<=w[z].w?Ba(w[z].img,2*L,w[z].m5)+" 2x":""}));18>w[z].head?(ba.addClass("dir dir"+w[z].head),L=8):L=6;ba.css({top:w[z].ty-L+"px",left:w[z].tx-L+"px"})}else ba.addClass("label").addClass("label"+w[z].style).addClass("label-"+
w[z].lang).css(Ha).attr({href:"//"+w[z].lang+".wikipedia.org/wiki/"+w[z].page,target:"_top"}).css({top:w[z].ty-fa[w[z].style]+"px",left:w[z].tx-ma[w[z].style]+"px",direction:isRTL(w[z].lang)?"rtl":"ltr"}),(L=/(.*?)(\s*\([^\)]*\)$|\s*, [^, \(]*$)/.exec(w[z].name))?ba.text(L[1]).append($('<span class="hell">&hellip;</span>')).append($('<span class="sufx"></span>').text(L[2]).hide()).hover(function(){$(".hell",this).hide();$(".sufx",this).show()},function(){$(".hell",this).show();$(".sufx",this).hide()}):
ba.text(w[z].name);K.append(ba)}}function b(K,w){var z=K.lx,ma=K.ly,fa=1<<K.lz-wma_maxlabel,ba=[],L,ca=[[],[],[],[]];for(L=0;L<w.length;++L){var da=128*(z/fa-w[L].dx);var ea=128*(ma/fa-(wma_zoomsize[wma_maxlabel]-w[L].dy-1));da=(w[L].tx+w[L].fx-da)*fa;var na=(w[L].ty+w[L].fy-ea)*fa;0<=da&&128>da&&0<=na&&128>na&&(ea=jQuery.extend(!0,{},w[L]),ea.tx=Math.floor(da),ea.ty=Math.floor(na),ea.fx=da-ea.tx,ea.fy=na-ea.ty,ca[Math.floor(da/64)+2*Math.floor(na/64)].push(ea))}for(L=0;4>L;++L)0<ca[L].length&&(ca[L].sort(function(ra,
T){return T.wg-ra.wg}),ba.push(ca[L][0]));a(K.span,ba)}0>I&&(I=0);0>F&&(F+=Math.floor(256*wma_zoomsize[C]));0<F&&(F%=Math.floor(256*wma_zoomsize[C]));var c=Math.floor(F/128)%ia,k=Math.floor(I/128)%oa,l=F%128,y=I%128,n,g,h;fb();for(g=0;g<oa;g++)for(n=0;n<ia;n++){var x=(n+c)%ia+(g+k)%oa*ia;var q=Math.floor(F/128)+n;var u=Math.floor(I/128)+g;var t=wma_tilesets[O].getTileURL(u,q,C);var m=ja[x];m.div.css({left:128*n-l+"px",top:128*g-y+"px"});if(m.url!=t||wma_highzoom_purge){m.url=t;if(0==O&&12<C){if(m.csrender||
(m.csrender=!0,m.img.fadeOut(200)),m.csx!=q||m.csy!=u||m.csz!=C||wma_highzoom_purge)m.can.hide(),m.img.hide(),wmajt.update(q,u,C,m,wma_highzoom_purge)}else{m.csz=C;m.csrender&&m.can.fadeOut(200);if(u>=wma_zoomsize[C]){m.img.fadeOut(0);m.span.text("");continue}m.img.attr("src")!=t?m.img.fadeOut(0).attr("src",t):m.csrender&&m.img.fadeIn(200);m.csrender=!1}null!==m.xhr&&m.xhr.abort();m.lx=q;m.ly=u;m.lz=C;m.span.html('<span class="loading">'+strings.labelLoading[E]+"</span>");if(C>wma_maxlabel){var p=
Math.floor(q/(1<<C-wma_maxlabel));t=Math.floor(u/(1<<C-wma_maxlabel));x=Ra(t,p,wma_maxlabel);t=Ia(t,p,wma_maxlabel)}else x=Ra(u,q,C),t=Ia(u,q,C);if(!lc[t]||"filler"in lc[t]){if(lc[t]&&"filler"in lc[t])a(m.span,lc[t].label);else if(C<=wma_maxlabel&&0<C){var M=Ia(Math.floor(u/2),Math.floor(q/2),C-1);if(lc[M]){p=q%2;lc[t]={label:[],filler:1};for(h=0;h<lc[M].label.length;h++)Math.floor(lc[M].label[h].tx/64)===q%2&&Math.floor(lc[M].label[h].ty/64)===u%2&&(p=jQuery.extend(!0,{},lc[M].label[h]),p.tx=2*(p.tx+
p.fx)-q%2*128,p.ty=2*(p.ty+p.fy)-u%2*128,p.fx=p.tx-Math.floor(p.tx),p.fy=p.ty-Math.floor(p.ty),p.tx=Math.floor(p.tx),p.ty=Math.floor(p.ty),lc[t].label.push(p));a(m.span,lc[t].label)}}(function(K,w,z){m.xhr=$.ajax({url:w,context:m}).success(function(ma){try{lc[K]=JSON.parse(ma),z?a(this.span,lc[K].label):b(this,lc[K].label)}catch(fa){this.span.html(ma)}}).error(function(){this.span.text("")})})(t,x,C<wma_maxlabel)}else C<wma_maxlabel?a(m.span,lc[t].label):b(m,lc[t].label)}}Ja(Q);for(x=0;x<Ka.length;++x)Ja(Ka[x]);
wma_highzoom_purge=!1;C>=wma_bldg3dzoom&&update3dBuildings();ka()}function V(a){a.clearColor(0,0,0,0);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthMask(!0);a.depthFunc(a.LEQUAL);a.clear(a.COLOR_BUFFER_BIT+a.DEPTH_BUFFER_BIT);var b=a.createProgram(),c=a.createShader(a.VERTEX_SHADER);a.shaderSource(c,$("#bldg-vs").text());a.compileShader(c);a.attachShader(b,c);c=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(c,$("#bldg-fs").text());a.compileShader(c);a.attachShader(b,c);a.linkProgram(b);a.useProgram(b);
b.vertexPosAttrib=a.getAttribLocation(b,"pos");a.enableVertexAttribArray(b.vertexPosAttrib);b.normalPosAttrib=a.getAttribLocation(b,"norm");a.enableVertexAttribArray(b.normalPosAttrib);var k=a.getUniformLocation(b,"u_resolution"),l=a.getUniformLocation(b,"u_centerdeg");c=a.getUniformLocation(b,"u_lightdir");r=Math.sqrt(38);a.uniform3f(c,3/r,2/r,5/r);wmajt.registerWebGLBuildingData(5E3,a,b);return function(){var y=H/2,n=G/2,g=60/(128<<C),h=aa(F+y,I+n);180<h.lon&&(h.lon-=360);a.uniform3f(k,y*g,n*g,
850);a.uniform3f(l,h.lon,h.lat,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);wmajt.renderWebGLBuildingData()}}function ta(){function a(m){var p;if(0<q)for(n.moveTo((m[0][0]-h.lon)*u+k,l-(m[0][1]-h.lat)*u),p=1;p<m.length;p++)n.lineTo((m[p][0]-h.lon)*u+k,l-(m[p][1]-h.lat)*u);for(p=0;p<m.length-1;p++)n.moveTo((m[p][0]-h.lon)*u+k,l-(m[p][1]-h.lat)*u),n.lineTo((m[p][0]-h.lon)*t+k,l-(m[p][1]-h.lat)*t),n.lineTo((m[p+1][0]-h.lon)*t+k,l-(m[p+1][1]-h.lat)*t)}if(W&&C>wma_bldg3dzoom){var b=wmajt.ref_z(),
c=wmajt.zbuild(),k=H/2,l=G/2,y=(128<<C)/60,n=bldg3dc,g,h=aa(F+k,I+l);180<h.lon&&(h.lon-=360);n.lineWidth=.5;n.strokeStyle="rgb(0, 0, 0)";n.beginPath();bldg3dc.clearRect(0,0,H,G);for(g in b){var x=c[g].geo.coordinates;b=3*c[g].tags["building:levels"]||c[g].tags.height;var q=3*c[g].tags["building:min_level"]||c[g].tags.min_height||0;var u=y*(1+q/450);var t=y*(1+b/450);if("Polygon"===c[g].geo.type)for(g=0;g<x.length;g++)a(x[g]);else a(x)}n.stroke();bldg3d.show();null!==bldg3dtimer&&clearTimeout(bldg3dtimer);
setTimeout(update3dBuildings,1500)}else bldg3d.hide()}function Ja(a){var b=la(a.lat,a.lon),c=b.x-F;-100>c&&(c+=256*wma_zoomsize[C]);a.obj.css("left",c-6+"px");a.obj.css("top",b.y-I-6+"px")}function Pa(a){qa=va=ua(a)}function db(a){a=ua(a);F+=a.x-H/2;I+=a.y-G/2;Z&&(Z=!1,za());P();return!1}function cb(a){La&&clearTimeout(La);Ea.stop(!0).fadeTo(1,1).text(a);La=setTimeout(function(){Ea.fadeOut(200)},5E3)}function Y(a){C=a;bldg3d&&(a>=wma_bldg3dzoom?bldg3d.show():bldg3d.hide())}function Sa(a,b){$.ajax({url:"//tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang="+
a+"&article="+b,dataType:"json",success:gb})}function hb(a){var b=!1;a=a||window.event;switch(a.keyCode||a.which){case 37:F-=H/1;break;case 38:I-=G/1;break;case 39:F+=H/1;break;case 40:I+=G/1;break;case 187:case 107:Ta();break;case 189:case 109:Ua();break;case 80:wma_highzoom_purge=!0;P();break;case 79:J.shown?(J.shown=!1,J.canvas.fadeOut(200)):Sa(strings.sover[E].site,strings.sover[E].list[0]);break;case 84:wa((O+1)%wma_tilesets.length);break;case 76:a="en de fr ru ar he ko ja ml fa commons".split(" ");
a=a[($.inArray(U,a)+1)%a.length];Ea.text(wikiminiatlas_sites[a]);Fa(a,!0);break;case 67:Fa("commons",!0);break;case 27:J.shown&&(J.shown=!1,J.canvas.fadeOut(200));X.shown&&Va();"hidden"!=ya.style.visibility&&(ya.style.visibility="hidden");break;default:b=!0}Z&&(Z=!1,za());P();return b}function ua(a){var b=a.originalEvent;return"touches"in b?{x:b.touches[0].pageX,y:b.touches[0].pageY}:{x:a.pageX,y:a.pageY}}function Ia(a,b,c){return U+"_"+(wma_zoomsize[c]-a-1)+"_"+b%(2*wma_zoomsize[c])+"_"+c+"_"+wma_tilesets[O].globe}
function Ra(a,b,c){return wma_database+"?l="+U+"&a="+(wma_zoomsize[c]-a-1)+"&b="+b%(2*wma_zoomsize[c])+"&z="+c+"&g="+wma_tilesets[O].globe}function Ta(a){var b=aa(F+H/2,I+G/2),c=!1;a||(a=window.event);a&&(a.which?c=3==a.which:a.button&&(c=2==a.button));c?W&&wma_highzoom_activated?Y(0==O?15:wma_tilesets[O].maxzoom):Y(0==O?12:wma_tilesets[O].maxzoom):C>=(0!=O||W&&wma_highzoom_activated?wma_tilesets[O].maxzoom:12)||Y(C+1);a=Z?la(Q.lat,Q.lon):la(b.lat,b.lon);F=a.x-H/2;I=a.y-G/2;P();return!1}function Ua(a){var b=
aa(F+H/2,I+G/2),c=!1;a||(a=window.event);a&&(a.which?c=3==a.which:a.button&&(c=2==a.button));if(c)Y(wma_tilesets[O].minzoom);else if(C<=wma_tilesets[O].minzoom)a:for(a=O-1;0<=a;a--){if(wma_tilesets[a].minzoom<C-1){O=a;C--;break a}}else Y(C-1);b=la(b.lat,b.lon);F=b.x-H/2;I=b.y-G/2;P();return!1}function wa(a,b){var c=C;O=a;Ha={color:wma_tilesets[a].linkcolor[0],textShadow:wma_tilesets[a].linkcolor[1]};$("a.label").css(Ha);credit.text("");"credit"in wma_tilesets[a]&&credit.html(wma_tilesets[a].credit);
c>(0!=a?wma_tilesets[a].maxzoom:W&&wma_highzoom_activated?15:12)&&(c=wma_tilesets[a].maxzoom);c<wma_tilesets[a].minzoom&&(c=wma_tilesets[a].minzoom);C!=c&&(a=aa(F+H/2,I+G/2),Y(c),c=la(a.lat,a.lon),F=c.x-H/2,I=c.y-G/2);b||P();Wa()}function Fa(a){U=a;for(a=0;a<ia*oa;++a)ja[a].url="";P()}function fb(){var a=aa(F+H/2,I+G/2);var b=Math.cos(.0174532778*a.lat)*wma_tilesets[O].equator*50/(256*wma_zoomsize[C]);a=Math.pow(10,Math.floor(Math.log(b)/Math.log(10)));b=50*a/b;50>5*b&&(b*=5,a*=5);50>2*b&&(b*=2,a*=
2);Xa.text(1>a?1E3*a+" m":a+" km");Ya.width(b)}function za(){Z?$("#button_target").css("background-position",""):$("#button_target").css("background-position","-40px 0")}function Ma(a,b){a=la(a,b);F=a.x-H/2;I=a.y-G/2;P()}function ib(){Ma(Q.lat,Q.lon);Z=!0;za()}function Aa(a,b,c){c=c||128*wma_zoomsize[C];return{y:Math.floor((.5-a/180)*c),x:Math.floor(b/360*c*2)}}function la(a,b,c){c=c||128*wma_zoomsize[C];b=Math.floor(b/360*c*2);0>b&&(b+=2*c);return{y:Math.floor((.5-a/180)*c),x:b}}function aa(a,b){return{lat:180*
(.5-b/(128*wma_zoomsize[C])),lon:a/(256*wma_zoomsize[C])*360}}function Ba(a,b,c){return c?"//upload.wikimedia.org/wikipedia/commons/thumb/"+c[0]+"/"+c+"/"+a+"/"+b+"px-"+a:"//commons.wikimedia.org/w/thumb.php?w="+b+"&f="+a}function Va(){X.shown=!1;X.panel.fadeOut(200)}function eb(){X.panel=$("<div></div>",{id:"wma_wmaci_panel"}).append($("<div></div>",{id:"wma_wmaci_panel_sub"}).append(X.span=$("<span></span>")).append($("<br/>")).append(X.link=$("<a></a>",{id:"wma_wmaci_link",target:"_top"}).click(function(a){a.stopPropagation()}))).css("visibility",
"visible").hide().click(Va).appendTo(f)}function jb(){var a=window.open("","showwin","left=0, top=0, width="+screen.width+", height="+screen.height+", toolbar=0, resizable=0, fullscreen=1"),b=d.page,c=d.lang,k=wma_tilesets[O].globe,l=aa(F+H/2,I+G/2);a.document.location=document.location.pathname+"?"+Q.lat+"_"+Q.lon+"_0_0_"+U+"_"+C+"_"+Ca+"_"+l.lat+"_"+l.lon+"&globe="+k+"&page="+b+"&lang="+c}function Na(a,b){return function(c){window.parent.postMessage(b+", "+a,"*")}}function Oa(a){W&&(a=a||B,null===
a.canvas&&(a.canvas=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({width:H+"px",height:G+"px"}).appendTo($(ha)),a.c=a.canvas[0].getContext("2d"),a.c.scale(N,N),a.shown=!0,a.drawn=!0,a==B&&$("#button_kml").show()),a===B&&D&&D.updateKML())}function kb(a){a=a.originalEvent;var b=JSON.parse(a.data),c;if("coords"in b)for(c=0;c<b.coords.length;++c){var k={obj:null,lat:b.coords[c].lat,lon:b.coords[c].lon};if(1E-4<Math.abs(k.lat-Q.lat)||1E-4<Math.abs(k.lon-Q.lon))k.obj=$("<div></div>").attr("title",
decodeURIComponent(b.coords[c].title)).addClass("emarker").mouseover(Na(c,"highlight")).mouseout(Na(c,"unhighlight")).click(Na(c,"scroll")).appendTo($(ha)),Ja(k),Ka.push(k)}if("ways"in b||"areas"in b)Oa(),B.ways=b.ways||null,B.areas=b.areas||null,ka();if("minlon"in b&&"maxlon"in b){if(!("maxlon"in B)||b.maxlon>B.maxlon)B.maxlon=b.maxlon;if(!("minlon"in B)||b.minlon<B.minlon)B.minlon=b.minlon}"getcoords"in b&&(c={query:b.getcoords,response:{topleft:aa(F,I),rightbottom:aa(F+H,I+G)}},window.parent&&
window.parent.postMessage(JSON.stringify(c),a.origin));"moveto"in b&&(a=b.moveto,"zoom"in a&&Y(a.zoom),"lat"in a&&"lon"in a&&(Ma(a.lat,a.lon),D&&D.setLatLon(a.lat,a.lon)))}function Za(a,b){function c(g){var h,x=180/Math.PI,q=Math.PI/2,u=180/2.003750834E7,t=[],m=-Infinity,p=Infinity;for(h=0;h<g.length;++h){var M=g[h][0]*u;var K=x*(2*Math.atan(Math.exp(g[h][1]*u/x))-q);M>m&&(m=M);M<p&&(p=M);K>b.maxlat&&(b.maxlat=K);K<b.minlat&&(b.minlat=K);t.push({lat:K,lon:M})}"maxlon"in b&&"maxlon"in b?(g=[{r:Math.max(b.maxlon,
m),l:Math.min(b.minlon,p)},{r:Math.max(b.maxlon,m+360),l:Math.min(b.minlon,p+360)},{r:Math.max(b.maxlon+360,m),l:Math.min(b.minlon+360,p)}],g.sort(function(w,z){return w.r-w.l-(z.r-z.l)}),b.minlon=g[0].l,b.maxlon=g[0].r):(b.maxlon=m,b.minlon=p);return t}function k(g){var h={outer:[],inner:[]},x;h.outer.push(c(g[0]));for(x=1;x<g.length;x++)h.inner.push(c(g[x]));b.areas?b.areas.push(h):b.areas=[h]}function l(g){g=[c(g)];b.ways?b.ways.push.apply(b.ways,g):b.ways=g}function y(g){var h;switch(g.type){case "LineString":l(g.coordinates);
break;case "MultiLineString":for(h=0;h<g.coordinates.length;h++)l(g.coordinates[h]);break;case "Polygon":k(g.coordinates);break;case "MultiPolygon":for(h=0;h<g.coordinates.length;h++)k(g.coordinates[h])}}var n;if("type"in a)if("GeometryCollection"==a.type)for(n=0;n<a.geometries.length;++n)y(a.geometries[n]);else y(a)}function lb(a){Za(a,B);if(B.ways||B.areas)Oa(),ka();if(B.maxlon&&B.minlon&&-Infinity<B.maxlat&&Infinity>B.minlat){a=(B.maxlon+B.minlon)/2;var b=(B.maxlat+B.minlat)/2,c=(B.maxlon-B.minlon)/
180*384,k=(B.maxlat-B.minlat)/180*384,l;for(l=0;12>l&&!(c>H/2||k>G/2);++l)c*=2,k*=2;Y(l);Ma(b,a)}}function gb(a){function b(n){var g,h=0;n[0].lon<J.minlon&&(h=360);for(g=0;g<n.length;++g)n[g].lon-=l-h,n[g].lon*=Math.cos(n[g].lat/180*Math.PI),n[g].lat-=y}var c=J.c,k=J.canvas;k?J={shown:!0,drawn:!1,canvas:k,c:c,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity}:(J={shown:!0,drawn:!1,canvas:null,c:null,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity},Oa(J));Za(a,J);a=J.areas;c=J.ways;var l=
(J.maxlon+J.minlon)/2,y=(J.maxlat+J.minlat)/2;if(null!==a)for(i=0;i<a.length;++i){for(j=0;j<a[i].outer.length;++j)b(a[i].outer[j]);for(j=0;j<a[i].inner.length;++j)b(a[i].inner[j])}if(null!==c)for(i=0;i<c.length;++i)latNorm(c[i]);J.canvas.fadeIn(200)}var H=500,G=300,ha=null,$a=!1,ia,oa,ja,va=null,qa={x:-1,y:-1},F=0,I=0,C=1,ab=0,Q={obj:null,lat:0,lon:0},Ka=[],Z=!0,ya=null,Ca="de",U="",E="en",pa=!1,O=0,Xa=null,Ya=null,xa=null,bb=null,X={shown:!1,panel:null,image:null,link:null};d=d||parseParams(window.location.href);
var J={},B={shown:!1,drawn:!1,canvas:null,c:null,ways:null,areas:null,maxlat:-Infinity,minlat:Infinity},Ha={},D=!1,Wa=null,W="HTMLCanvasElement"in window,N="devicePixelRatio"in window?window.devicePixelRatio:1,Ea,La=null;(function(){var a=d.wma||window.location.search.substr(1);var b=d.page,c=d.lang;xa=d.globe||"Earth";b&&W&&$.ajax({url:"//tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang="+c+"&article="+b,dataType:"json",success:lb});Wa=function(){if(!W)return function(){};var g=$("<canvas></canvas>").attr({width:1024,
height:512}).css({display:"none"}),h=$("<canvas></canvas>").attr({width:768,height:384}).css({display:"none"}),x=$("<canvas></canvas>").attr({width:768,height:384}).css({display:"none"}),q=$("<div></div>").css({position:"absolute",width:"80px",height:"80px",bottom:"20px",right:"5px",zIndex:50,display:"none",borderRadius:"40px","-moz-border-radius":"40px",boxShadow:"5px 5px 25px rgba(0, 0, 0, 0.3)"}),u=$("<canvas></canvas>").attr({width:160,height:160}).css({position:"absolute",width:"80px",height:"80px",
bottom:"20px",right:"5px",zIndex:51,display:"none"});$("body").append(u).append(g).append(q);return function(){function t(z,ma){var fa=new Image;$(fa).load(function(){K.drawImage(fa,128*z,128*ma);M++;if(18==M){w.drawImage(h[0],0,0,1024,512);if(!D){D=wmaGlobe3d(u[0],g[0]);if(!D)return;D.setLatLon(Q.lat,Q.lon);q.fadeIn(200);u.fadeIn(200);D.mapContext=w;D.tmap=h[0];D.tmapContext=K;D.omap=x[0];D.omapContext=x[0].getContext("2d");D.updateTiles=function(){D.mapContext.clearRect(0,0,1024,512);D.mapContext.drawImage(D.tmap,
0,0,1024,512);D.updateTexture();D.draw()};D.updateKML=function(){D.mapContext.clearRect(0,0,1024,512);D.mapContext.drawImage(D.tmap,0,0,1024,512);D.mapContext.save();D.mapContext.globalAlpha=.5;ka(384,0,0,768,384,D.omapContext);D.mapContext.drawImage(D.omap,0,0,1024,512);D.mapContext.restore();D.updateTexture();D.draw()}}B.canvas?D.updateKML():D.updateTiles()}}).attr("src",wma_tilesets[O].getTileURL(ma,z,0,!0))}var m,p,M=0,K=h[0].getContext("2d"),w=g[0].getContext("2d");K.clearRect(0,0,768,384);for(m=
0;6>m;++m)for(p=0;3>p;++p)t(m,p)}}();c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)/;c.test(a)&&(c.exec(a),Q.lat=parseFloat(RegExp.$1),Q.lon=parseFloat(RegExp.$2),H=$(window).width(),G=$(window).height(),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)/,c.test(a)&&(c.exec(a),U=RegExp.$5),c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)/,c.test(a)&&(c.exec(a),ab=parseInt(RegExp.$6,10),Y(ab),Y(Math.min(C,0!=O?wma_tilesets[O].maxzoom:W&&wma_highzoom_activated?15:12)),Y(Math.max(C,wma_tilesets[O].minzoom))),
c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)_([a-z-]+)/,c.test(a)?(c.exec(a),Ca=RegExp.$7):Ca=U,c=/([\d+-.]+)_([\d+-.]+)_([\d]+)_([\d]+)_([a-z-]+)_([\d]+)_([a-z-]+)_([\d+-.]+)_([\d+-.]+)/,c.test(a)?(a=la(RegExp.$8,RegExp.$9),Z=!1,$a=!0):(a=la(Q.lat,Q.lon),Z=!0),F=a.x-H/2,I=a.y-G/2);U=U.split("-")[0];E=Ca;if("co"==E||"commons"==E)E="en";pa=isRTL(E);wmajt.setUILang(E);for(n in strings)strings[n][E]||(strings[n][E]=strings[n].en);var k='<div class="bsprite" id="button_plus" title="'+strings.zoomIn[E]+
'"></div><div class="bsprite" id="button_minus" title="'+strings.zoomOut[E]+'"></div><div class="bsprite" id="button_target" title="'+strings.center[E]+'"></div><div class="bsprite" id="button_kml" title="'+strings.kml[E]+'"></div><div class="bsprite" id="button_menu" title="'+strings.settings[E]+'"></div>';k=$a?k+('<img id="button_hide" src="'+wma_imgbase+'button_hide.png" title="'+strings.close[E]+'" onclick="window.close()">'):k+('<img id="button_fs" src="'+wma_imgbase+'button_fs.png" title="'+
strings.fullscreen[E]+'">');k+='<div id="wma_map" style="position:absolute; width:'+H+"px; height:"+G+'px; cursor: move; background-color: #aaaaaa;"></div>';k+='<div id="scalebox"><div id="scalebar"></div><div id="scalelabel">null</div></div>';k+='<div id="synopsis"><p id="synopsistext"></p></div>';k+='<div id="wma_settings"><h4>'+strings.settings[E]+'</h4><p class="option">Size Comparison <select id="wmaSetSizeOverlay">';a=strings.sover[E].list;k+='<option value="-" class="bg" selected="selected">-</option>';
k+='<option value="+" class="bg">'+strings.other[E]+"</option>";k+='<option value="*" class="bg">'+decodeURIComponent(b)+"</option>";for(n in a)k+='<option value="'+a[n]+'">'+a[n]+"</option>";k+='</select></p><a href="//wma.wmflabs.org/" target="_top"><img src="//upload.wikimedia.org/wikipedia/commons/4/46/Powered_by_labs_button.png" border="0"></a></div>';f.html(k).append($("<span></span>",{id:"wmacredit"}).append($("<a></a>",{href:"//meta.wikimedia.org/wiki/WikiMiniAtlas/"+Ca,target:"_top"}).text("WikiMiniAtlas")).append(credit=
$("<span></span>")));var l=new wmaMenu(pa);(function(){var g;l.addTitle(strings.labelSet[E],pa);var h='<select id="wmaLabelSet">';U in wikiminiatlas_sites&&(h+='<option value="'+U+'" selected="selected">'+wikiminiatlas_sites[U]+"</option>");U!==E&&E in wikiminiatlas_sites&&(h+='<option value="'+E+'">'+wikiminiatlas_sites[E]+"</option>");if(U in wikiminiatlas_sites||E in wikiminiatlas_sites)h+="<option disabled></option>";for(g in wikiminiatlas_sites)"commons"!==g&&(h+='<option value="'+g+'">'+wikiminiatlas_sites[g]+
"</option>");var x=l.addGroup([["LANG",h+"</select>"],["commons",strings.commons[E]]],function(t){"LANG"==t&&(t=x.items.LANG.find("select option:selected").val());Fa(t)},"commons"==U?"commons":"LANG",pa);x.items.LANG.find("select").click(function(t){t.stopPropagation()}).change(function(t){x.items.LANG.click()});l.addSep();var q={};for(g=0;g<wma_tilesets.length;++g)h=wma_tilesets[g].globe,q[h]=q[h]||[],q[h].push([g,strings[wma_tilesets[g].name][E]||""]);k='<select id="wmaGlobeSet">';for(g in q)k+=
'<option value="'+g+'"',g==xa&&(k+='selected="selected"'),k+=">"+strings["map"+g][E]+"</option>";k+="</select>";l.addTitle(strings.solarSystem[E],pa);var u=l.addItem(k,void 0,pa);u.find("select").click(function(t){t.stopPropagation()}).change(function(t){t=$(this).find("option:selected").val();q[xa].hide();q[t].show();xa=t;u.click();wa(q[t].current())});l.addSep();l.addTitle(strings.mode[E],pa);for(g in q)q[g]=l.addGroup(q[g],wa,q[g][0][0],pa),g!==xa&&q[g].hide(),l.addSep();l.addItem(strings.sizeRef[E],
e)})();$("#button_menu").click(function(){l.toggle()});$("#button_fs").click(jb);$("#wma_widget").append(l.div.css({right:"40px",top:"26px"}));a=strings.dyk[E];var y=$("<div></div>").html(a[Math.floor(Math.random()*a.length)]).addClass("news");Ea=$("<div></div>").css({position:"absolute",top:"30px",left:"60px",zIndex:100,fontSize:"40px",color:"white",textShadow:"1px 1px 5px black",fontWeight:"bold"}).appendTo("#wma_widget");wmaNews[0]=function(){wa(4)};wmaNews[1]=function(){W?(F=19039255,I=3363704,
Y(15),wa(0)):y.text("Sorry, your browser does not support the canvas element! Try FireFox or Google Chrome.")};$("#wma_widget").append(y);y.click(function(){y.fadeOut()});setTimeout(function(){y.fadeOut()},1E4);Xa=$("#scalelabel");Ya=$("#scalebar");document.getElementById("button_target");ya=document.getElementById("wma_settings");$("#wmaLabelSet").change(function(){Fa(this.value)});$("#wmaSetSizeOverlay").change(function(){a:{var g=strings.sover[E].site,h=this.value;if("+"==h&&(h=prompt("Enter article title to use as overlay"),
!h))break a;"*"==h&&(h=d.page,g=d.lang);"-"==h?(J.shown=!1,J.canvas.fadeOut(200)):(Sa(g,h),e())}});$("#button_plus").on("mousedown",Ta);$("#button_minus").on("mousedown",Ua);$("#button_target").on("click",ib);$("#button_kml").on("click",R);$(document).on("keydown",hb);$(document).on("contextmenu",function(){return!1});$("body").on("dragstart",function(){return!1});$("#wma_map").click(function(g){g=ua(g);if(g.x!=qa.x||g.y!=qa.y)return!1});A();bldg3d=$('<canvas class="wmakml"></canvas>').attr({width:H*
N,height:G*N}).css({zIndex:19,opacity:.75,width:H+"px",height:G+"px"}).appendTo($(ha));if(W){try{bldg3dc=bldg3d[0].getContext("experimental-webgl"),update3dBuildings=V(bldg3dc)}catch(g){bldg3dc=null,bldg3d.remove(),bldg3d=$('<canvas class="wmakml"></canvas>').attr({width:H*N,height:G*N}).css({zIndex:19,opacity:.75,width:H+"px",height:G+"px"}).appendTo($(ha))}bldg3dc&&!1!==update3dBuildings||(bldg3dc=bldg3d[0].getContext("2d"),bldg3dc.scale(N,N),update3dBuildings=ta)}$(window).resize(S);var n;for(n=
0;n<wma_tilesets.length&&wma_tilesets[n].globe!=xa;++n);wa(n,!0);P();za();bb=/https?:\/\/([a-z-]+)\.wikipedia\.org\/wiki\/(.*)/;$("#wma_widget").mouseover(function(g){if(g.metaKey||g.ctrlKey)if(g.target.href&&bb.test(g.target.href)){g=RegExp.$1;var h=RegExp.$2;$.getJSON("https://"+g+".wikipedia.org/api/rest_v1/page/summary/"+h,function(x){$("#synopsistext").css({direction:x.dir,"padding-left":"0.5em","padding-right":"0.5em"}).html(x.extract_html);if("thumbnail"in x){var q=new Image,u=x.thumbnail.width/
2,t=x.thumbnail.height/2,m="ltr"==x.dir?"left":"right";$(q).css({width:u+"px",height:t+"px",position:"absolute",bottom:"0.5em"}).css(m,"10px").load(function(){$("#synopsistext").css("padding-"+m,u+20+"px").append($(q))}).attr("src",x.thumbnail.source)}$("#synopsis").fadeIn("slow");setTimeout(function(){var p=$("#synopsistext").outerHeight(!0),M=G/2;$("#synopsis").animate({height:p<M?p:M})},500)})}else $("#synopsis").fadeOut("fast")});$("#synopsis").click(function(g){g.target==this&&$("#synopsis").fadeOut("fast")});
if(window.postMessage&&($(window).on("message",kb),window!=window.top))try{window.parent.postMessage("request","*")}catch(g){}})()}function wmaMenu(f){this.div=$("<div></div>").addClass("wmamenu").css("direction",!0===f?"rtl":"");this.parent=null;this.shown=!1}wmaMenu.prototype.addTitle=function(f,d){return $("<div></div>").addClass("wmamenutitle").html(f).css("direction",!0===d?"rtl":"").appendTo(this.div)};
wmaMenu.prototype.addItem=function(f,d,e){d=d||function(){};var v=this,A=$("<div></div>").addClass("wmamenuitem").html(f).css("direction",!0===e?"rtl":"").mouseenter(function(){A.css("background-color","#AAA")}).mouseleave(function(){A.css("background-color","")}).click(function(){d();v.close()}).appendTo(this.div);return A};
wmaMenu.prototype.addMenu=function(f,d,e){var v=$("<div></div>").addClass("wmasubmenu").html(f).css("direction",!0===e?"rtl":"").mouseenter(function(){v.css("background-color","#AAA")}).mouseleave(function(){v.css("background-color","");d.hide()}).click(function(){d.move(v.width(),0);d.show()}).append(d.div).appendTo(this.div);d.parent=this;return v};
wmaMenu.prototype.addCheck=function(f,d,e,v){function A(){e?S.addClass("wmamenuchecked"):S.removeClass("wmamenuchecked")}var S=this.addItem(f,function(){e=!e;A();d(e)},v);d=d||function(){};A();return{toggle:function(R){void 0===R&&(e=!e,A())},check:A,item:S}};
wmaMenu.prototype.addGroup=function(f,d,e,v){function A(V){if(V!=ka){for(var ta in R)ta==V?R[ta].addClass("wmamenuselected"):R[ta].removeClass("wmamenuselected");ka=V}}function S(V,ta){R[V]=Ga.addItem(ta,function(){A(V);d(V)},v)}var R={},Ga=this,ka=-1;e=e||0;d=d||function(){};for(var P=0;P<f.length;++P)"object"===typeof f[P]?S(f[P][0],f[P][1]):S(P,f[P]);A(e);return{items:R,select:A,current:function(){return ka},hide:function(){for(var V in R)R[V].hide()},show:function(){for(var V in R)R[V].show()}}};
wmaMenu.prototype.addSep=function(){this.div.children().last().css({"border-bottom-style":"solid","border-bottom-width":"1px","border-bottom-color":"#AAA"})};wmaMenu.prototype.show=function(){this.div.fadeIn(200);this.shown=!0};wmaMenu.prototype.hide=function(){this.div.fadeOut(200);this.shown=!1};wmaMenu.prototype.toggle=function(){this.shown?this.hide():this.show()};wmaMenu.prototype.close=function(){this.hide();this.parent&&this.parent.close()};
wmaMenu.prototype.move=function(f,d){this.div.css({top:d+"px",left:f+"px"})};
